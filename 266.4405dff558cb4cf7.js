"use strict";(self.webpackChunkPlataformaIntegralProveedores=self.webpackChunkPlataformaIntegralProveedores||[]).push([[266],{5266:(N,g,s)=>{s.r(g),s.d(g,{LoginModule:()=>U});var c=s(6895),f=s(529),d=s(7599);class h{constructor(){this.index=0,this.email="",this.password=""}}var r=s(433),v=s(7857),b=s(1205),t=s(1571),x=s(321),_=s(7579);let u=(()=>{class o{constructor(e){this.router=e,this.subject=new _.x,this.keepAfterRouteChange=!1,this.router.events.subscribe(i=>{i instanceof d.OD&&(this.keepAfterRouteChange?this.keepAfterRouteChange=!1:this.clear())})}getAlert(){return this.subject.asObservable()}success(e,i=!1){this.keepAfterRouteChange=i,this.subject.next({type:"success",text:e})}error(e,i=!1){this.keepAfterRouteChange=i,this.subject.next({type:"error",text:e})}clear(){this.subject.next({})}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(d.F0))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var C=s(727);function w(o,n){if(1&o&&(t.TgZ(0,"div",1),t._uU(1),t.qZA()),2&o){const e=t.oxw();t.Q6J("ngClass",e.message.cssClass),t.xp6(1),t.Oqu(e.message.text)}}let Z=(()=>{class o{constructor(e){this.alertService=e,this.subscription=new C.w0}ngOnInit(){this.subscription=this.alertService.getAlert().subscribe(e=>{switch(e&&e.type){case"success":e.cssClass="alert alert-success";break;case"error":e.cssClass="alert alert-danger"}this.message=e})}ngOnDestroy(){this.subscription.unsubscribe()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(u))},o.\u0275cmp=t.Xpm({type:o,selectors:[["alert"]],decls:1,vars:1,consts:[[3,"ngClass",4,"ngIf"],[3,"ngClass"]],template:function(e,i){1&e&&t.YNc(0,w,2,2,"div",0),2&e&&t.Q6J("ngIf",i.message)},dependencies:[c.mk,c.O5],encapsulation:2}),o})();function L(o,n){1&o&&(t.TgZ(0,"div"),t._uU(1,"Usuario es requerido"),t.qZA())}function A(o,n){if(1&o&&(t.TgZ(0,"div",18),t.YNc(1,L,2,0,"div",19),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.f.email.errors)}}function I(o,n){1&o&&(t.TgZ(0,"span",20),t._UZ(1,"i",21),t.qZA())}function T(o,n){1&o&&t._UZ(0,"i",23)}function y(o,n){if(1&o&&(t.TgZ(0,"span",20),t.YNc(1,T,1,0,"i",22),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.showPassword)}}function J(o,n){1&o&&(t.TgZ(0,"div"),t._uU(1,"Password es requerido"),t.qZA())}function M(o,n){if(1&o&&(t.TgZ(0,"div",18),t.YNc(1,J,2,0,"div",19),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.f.passw.errors)}}function S(o,n){1&o&&t._UZ(0,"span",24)}const p=function(o){return{"is-invalid":o}};function P(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5),t._UZ(5,"img",6),t.qZA(),t.TgZ(6,"div",5)(7,"h3"),t._uU(8,"Iniciar Sesi\xf3n en "),t.qZA()()(),t._UZ(9,"br")(10,"alert"),t.TgZ(11,"form",7),t.NdJ("ngSubmit",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.loginSession())}),t.TgZ(12,"label",8),t._uU(13,"Usuario"),t.qZA(),t.TgZ(14,"div",9)(15,"input",10),t.NdJ("ngModelChange",function(a){t.CHM(e);const l=t.oxw();return t.KtG(l.login.email=a)}),t.qZA(),t.YNc(16,A,2,1,"div",11),t.qZA(),t.TgZ(17,"label",8),t._uU(18,"Contrase\xf1a"),t.qZA(),t.TgZ(19,"div",9)(20,"input",12),t.NdJ("ngModelChange",function(a){t.CHM(e);const l=t.oxw();return t.KtG(l.login.password=a)}),t.qZA(),t.TgZ(21,"div",13),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.mostrarPasswor())}),t.YNc(22,I,2,0,"span",14),t.YNc(23,y,2,1,"span",14),t.qZA(),t.YNc(24,M,2,1,"div",11),t.qZA(),t.TgZ(25,"div",15)(26,"button",16),t.YNc(27,S,1,0,"span",17),t._uU(28," Ingresar "),t.qZA()()()()()()}if(2&o){const e=t.oxw();t.xp6(5),t.MGl("src","",e.img,"/assets/TorresTorres.png",t.LSH),t.xp6(6),t.Q6J("formGroup",e.form),t.xp6(4),t.Q6J("ngModel",e.login.email)("ngClass",t.VKq(13,p,e.submitted&&e.f.email.errors)),t.xp6(1),t.Q6J("ngIf",e.submitted&&e.f.email.errors),t.xp6(4),t.Q6J("type",e.showPassword?"text":"password")("ngModel",e.login.password)("ngClass",t.VKq(15,p,e.submitted&&e.f.passw.errors)),t.xp6(2),t.Q6J("ngIf",!e.showPassword),t.xp6(1),t.Q6J("ngIf",e.showPassword),t.xp6(1),t.Q6J("ngIf",e.submitted&&e.f.passw.errors),t.xp6(2),t.Q6J("disabled",e.loading),t.xp6(1),t.Q6J("ngIf",e.loading)}}const k=[{path:"",component:(()=>{class o{constructor(e,i,a,l){this.formBuilder=e,this.router=i,this.authService=a,this.alertService=l,this.img=b.O.appImg,this.email="",this.showPassword=!1,this.form=new r.nJ({}),this.loading=!1,this.submitted=!1,this.returnUrl="",this.login=new h,this.showLogin=!1}ngOnInit(){this.initForm(),this.isUserLogin(),this.returnUrl="administracion/proveedor",this.showLogin="true"==localStorage.getItem("isLoggedIn")}isUserLogin(){null!=this.authService.getToken()&&this.router.navigate([this.returnUrl])}get f(){return this.form.controls}initForm(){this.form=this.formBuilder.group({email:["",[r.kI.required]],passw:["",[r.kI.required]]})}mostrarPasswor(){this.showPassword=!this.showPassword}loginSession(){if(this.submitted=!0,this.form.invalid)return;this.loading=!0;let e=new v._;e.email=this.login.email,e.password=this.login.password,console.log("usuario: "+JSON.stringify(e)),this.authService.login(e).subscribe({next:i=>{if(this.loading=!1,200===i.code){var a=i.data;localStorage.setItem("token",a.token),localStorage.setItem("isLoggedIn","true"),this.authService.me(a.token).subscribe(l=>{const O=JSON.stringify(l);localStorage.setItem("userAuth",O),window.location.reload()})}},error:i=>{console.log(JSON.stringify(i)),this.alertService.error(i.error.message),this.loading=!1}})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(r.QS),t.Y36(d.F0),t.Y36(x.J),t.Y36(u))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-login"]],inputs:{login:"login"},decls:1,vars:1,consts:[["class","back",4,"ngIf"],[1,"back"],[1,"div-center"],[1,"content"],[1,"justify-content-center"],[1,"p-2","justify-content-center","d-flex"],["alt","Responsive Image","width","235","height","126",1,"img-fluid",3,"src"],["method","post",3,"formGroup","ngSubmit"],["for","exampleInputEmail1"],[1,"input-group","mb-3"],["type","text","aria-label","Usuario","formControlName","email",1,"form-control","custom-redondo",3,"ngModel","ngClass","ngModelChange"],["class","invalid-feedback",4,"ngIf"],["type","text","aria-label","Password","formControlName","passw",1,"form-control","custom-redondo",3,"type","ngModel","ngClass","ngModelChange"],[1,"input-group-append","custom-redondo",3,"click"],["class","input-group-text custom-redondo",4,"ngIf"],["align","center"],["type","submit",1,"btn","btn-primary","custom-redondo",3,"disabled"],["class","spinner-border spinner-border-sm mr-1",4,"ngIf"],[1,"invalid-feedback"],[4,"ngIf"],[1,"input-group-text","custom-redondo"],[1,"bi","bi-eye"],["class","bi bi-eye-slash-fill",4,"ngIf"],[1,"bi","bi-eye-slash-fill"],[1,"spinner-border","spinner-border-sm","mr-1"]],template:function(e,i){1&e&&t.YNc(0,P,29,17,"div",0),2&e&&t.Q6J("ngIf",!i.showLogin)},dependencies:[c.mk,c.O5,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,Z],styles:[".back[_ngcontent-%COMP%]{background-color:#fff;width:100%;position:absolute;top:0;bottom:0}.div-center[_ngcontent-%COMP%]{border-radius:18px;width:600px;height:400px;background:#e2e2e2;position:absolute;inset:0;margin:auto;max-width:100%;max-height:100%;overflow:auto;padding:1em 2em;border-bottom:2px solid #ccc;display:table}div.content[_ngcontent-%COMP%]{display:table-cell;vertical-align:middle}div[_ngcontent-%COMP%]   input.custom-redondo[_ngcontent-%COMP%]{border-radius:20px;border:1px solid rgb(247,247,247);border-right:0px solid #C00;background-color:#f7f7f7}div.custom-redondo[_ngcontent-%COMP%], span.custom-redondo[_ngcontent-%COMP%]{background-color:#f7f7f7;border-radius:0 20px 20px 0;border:1px solid rgb(247,247,247);border-left:0px solid #C00}button.custom-redondo[_ngcontent-%COMP%]{border-radius:28px;display:inline-block;padding:16px 49px;text-decoration:none}"]}),o})()}];let m=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[d.Bz.forChild(k),d.Bz]}),o})(),U=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[c.ez,m,r.UX,m,f.JF,r.u5]}),o})()}}]);