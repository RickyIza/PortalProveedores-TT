"use strict";(self.webpackChunkPlataformaIntegralProveedores=self.webpackChunkPlataformaIntegralProveedores||[]).push([[157],{157:(S,E,l)=>{l.r(E),l.d(E,{AdmiEvalModule:()=>Se});var v=l(6895),c=l(7599),b=l(8499),f=l(3804);class p{constructor(){this.index=0,this.checked=!1,this.id=0,this.fk_estado=0,this.fk_proveedor=0,this.activo_eva=0,this.resultado_eva="",this.evaluacion_actual_eva="",this.evaluacion_ultima_eva="",this.responsable_eva="",this.usuario_eva="",this.cantidad_eva=0,this.fecha_ultima_evaluacion_eva="",this.fecha_vencimiento_evaluacion_eva="",this.dias_eva=0,this.estados=new f.G,this.proveedores=new b.I}}var Z=l(2490);class _{constructor(){this.index=0,this.id=0,this.template=0,this.fk_proveedor=0,this.nombre="",this.estado="",this.email=""}}var e=l(1571),u=l(8573),d=l(529),g=l(5625),T=l(9019);let P=(()=>{class a{constructor(t,i){this.http=t,this.router=i,this.baseUrl=T.N.urlGlobal+"cuestionario-evaluacion-categoria",this.url=`${this.baseUrl}`,this.httpOptions={headers:new d.WM({"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer "+localStorage.getItem("token")})}}listPreguntas(t){return this.http.get(this.url+"/"+t,this.httpOptions).pipe((0,g.X)(1))}}return a.\u0275fac=function(t){return new(t||a)(e.LFG(d.eN),e.LFG(c.F0))},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})(),F=(()=>{class a{constructor(t,i){this.http=t,this.router=i,this.baseUrl=T.N.urlGlobal+"send-evaluacion-proveedor",this.url=`${this.baseUrl}`,this.httpOptions={headers:new d.WM({"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer "+localStorage.getItem("token")})}}enviarEvaluacionProv(t){return this.http.post(this.url,t,this.httpOptions).pipe((0,g.X)(1))}enviarEvaluacion(t,i){return this.http.post(this.url+"/"+i,t,this.httpOptions).pipe((0,g.X)(1))}}return a.\u0275fac=function(t){return new(t||a)(e.LFG(d.eN),e.LFG(c.F0))},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})(),y=(()=>{class a{constructor(t,i){this.http=t,this.router=i,this.baseUrl=T.N.urlGlobal+"evaluacion-",this.url=`${this.baseUrl}`,this.httpOptions={headers:new d.WM({"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer "+localStorage.getItem("token")})}}listEvaluacionProveedor(){return this.http.get(this.url+"proveedor",this.httpOptions).pipe((0,g.X)(1))}listEvaluacion(){return this.http.get(this.url+"proveedor-data",this.httpOptions).pipe((0,g.X)(1))}retriveEvaluacionProveedor(t){return this.http.get(this.url+"proveedor/"+t,this.httpOptions).pipe((0,g.X)(1))}crearEvaluacionProveedor(t){let i=JSON.stringify(t);return this.http.post(this.url+"cuestionario-proveedor",i).pipe((0,g.X)(1))}}return a.\u0275fac=function(t){return new(t||a)(e.LFG(d.eN),e.LFG(c.F0))},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var J=l(7658),I=l(7843);class k{constructor(){this.index=0,this.id=0,this.fk_tipo_proveedor=0,this.nombre_cat="",this.descripcion_cat="",this.tipo_proveedor=new I.O}}class L{constructor(){this.index=0,this.id=0,this.nombre_cues_eva="",this.descripcion_cues_eva="",this.fk_categoria=0,this.ponderacion_cues_eva=0,this.ponderacion_final=0,this.categoria_document=new k}}var M=l(9012),Y=l(4094);let Q=(()=>{class a{constructor(t,i){this.http=t,this.router=i,this.baseUrl=T.N.urlGlobal+"get-result-evaluacion",this.url=`${this.baseUrl}`,this.httpOptions={headers:new d.WM({"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer "+localStorage.getItem("token")})}}obtenerResultEvaluacionProveedor(t){return this.http.get(this.url+"-proveedor/"+t,this.httpOptions).pipe((0,g.X)(1))}obtenerUsuariosEvaluacion(t){return this.http.get(this.url+"-user/"+t,this.httpOptions).pipe((0,g.X)(1))}}return a.\u0275fac=function(t){return new(t||a)(e.LFG(d.eN),e.LFG(c.F0))},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var h=l(433),A=l(4333);function G(a,r){1&a&&(e.TgZ(0,"tbody")(1,"tr")(2,"p"),e._uU(3,"Sin solicitudes"),e.qZA()()())}function R(a,r){if(1&a&&(e.TgZ(0,"td",42),e._uU(1),e.qZA()),2&a){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.clasificacion_pro.nombre_cla," ")}}function z(a,r){if(1&a&&(e.TgZ(0,"td",42),e._uU(1),e.qZA()),2&a){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.categorias.nombre_cat," ")}}function $(a,r){if(1&a&&(e.TgZ(0,"a",43),e._UZ(1,"i",44),e._uU(2," Crear "),e.qZA()),2&a){const t=e.oxw().$implicit;e.MGl("routerLink","/administracion/evaluacion/fromEval/",t.id,"")}}function j(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"a",45),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,n=e.oxw(3);return e.KtG(n.mostrarDetalleEvaluacion(o.id))}),e._uU(1," Resultado "),e.qZA()}}function K(a,r){if(1&a&&(e.TgZ(0,"tr",36)(1,"td",37),e._uU(2),e.qZA(),e.TgZ(3,"td",38),e._uU(4),e.qZA(),e.YNc(5,R,2,1,"td",39),e.YNc(6,z,2,1,"td",39),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.qZA(),e.TgZ(15,"td"),e._uU(16),e.qZA(),e.TgZ(17,"td"),e._uU(18),e.qZA(),e.TgZ(19,"td"),e._uU(20),e.qZA(),e.TgZ(21,"td"),e._uU(22),e.qZA(),e.TgZ(23,"td"),e.YNc(24,$,3,1,"a",40),e.YNc(25,j,2,0,"a",41),e.qZA()()),2&a){const t=r.$implicit;e.xp6(1),e.s9C("title",t.ruc_pro),e.xp6(1),e.hij(" ",t.ruc_pro," "),e.xp6(1),e.s9C("title",t.nombre_pro),e.xp6(1),e.hij(" ",t.nombre_pro," "),e.xp6(1),e.Q6J("ngIf",1==t.fk_tipo_proveedor||2==t.fk_tipo_proveedor),e.xp6(1),e.Q6J("ngIf",3==t.fk_tipo_proveedor),e.xp6(2),e.Oqu(null==t.evaluaciones[0]?null:t.evaluaciones[0].evaluacion_actual_eva),e.xp6(2),e.Oqu(null==t.evaluaciones[0]?null:t.evaluaciones[0].fecha_ultima_evaluacion_eva),e.xp6(2),e.Oqu(null==t.evaluaciones[0]?null:t.evaluaciones[0].responsable_eva),e.xp6(2),e.Oqu(null==t.evaluaciones[0]?null:t.evaluaciones[0].usuario_eva),e.xp6(2),e.Oqu(null==t.evaluaciones[0]?null:t.evaluaciones[0].cantidad_eva),e.xp6(2),e.hij(" ",null==t.evaluaciones[0]?null:t.evaluaciones[0].fecha_vencimiento_evaluacion_eva," "),e.xp6(2),e.Oqu(t.criticidad_pro),e.xp6(2),e.Oqu(null==t.evaluaciones[0]||null==t.evaluaciones[0].estados?null:t.evaluaciones[0].estados.nombre_est),e.xp6(2),e.Q6J("ngIf",null==(null==t.evaluaciones[0]?null:t.evaluaciones[0].fecha_vencimiento_evaluacion_eva)),e.xp6(1),e.Q6J("ngIf",null!=(null==t.evaluaciones[0]?null:t.evaluaciones[0].fecha_vencimiento_evaluacion_eva))}}const q=function(a){return{itemsPerPage:8,currentPage:a}};function D(a,r){if(1&a&&(e.TgZ(0,"tbody"),e.YNc(1,K,26,16,"tr",35),e.ALo(2,"paginate"),e.qZA()),2&a){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",e.xi3(2,1,t.listaEvalua,e.VKq(4,q,t.page)))}}function X(a,r){if(1&a&&(e.TgZ(0,"table",32)(1,"thead")(2,"tr")(3,"th",33),e._uU(4,"RUC"),e.qZA(),e.TgZ(5,"th",33),e._uU(6,"Proveedor"),e.qZA(),e.TgZ(7,"th",33),e._uU(8,"Tipo de servicio"),e.qZA(),e.TgZ(9,"th",33),e._uU(10,"Resultado"),e.qZA(),e.TgZ(11,"th",33),e._uU(12," Fecha de "),e._UZ(13,"br"),e._uU(14," \xfaltima evaluaci\xf3n "),e.qZA(),e.TgZ(15,"th",33),e._uU(16,"Responsable"),e._UZ(17,"br"),e._uU(18,"de solicitar"),e._UZ(19,"br"),e._uU(20,"evaluaci\xf3n"),e.qZA(),e.TgZ(21,"th",33),e._uU(22," Cantidad"),e._UZ(23,"br"),e._uU(24," de usuarios "),e.qZA(),e.TgZ(25,"th",33),e._uU(26,"Evaluaciones"),e._UZ(27,"br"),e._uU(28,"contestadas"),e.qZA(),e.TgZ(29,"th",33),e._uU(30," Fecha de "),e._UZ(31,"br"),e._uU(32," vencimiento "),e.qZA(),e.TgZ(33,"th",33),e._uU(34,"Criticidad"),e.qZA(),e.TgZ(35,"th",33),e._uU(36,"Estados"),e.qZA(),e.TgZ(37,"th",33),e._uU(38,"\xa0\xa0Opciones\xa0\xa0"),e.qZA()()(),e.YNc(39,G,4,0,"tbody",34),e.YNc(40,D,3,6,"tbody",34),e.qZA()),2&a){const t=e.oxw();e.xp6(39),e.Q6J("ngIf",0===t.listaEvalua.length),e.xp6(1),e.Q6J("ngIf",t.listaEvalua.length>0)}}function B(a,r){1&a&&(e.TgZ(0,"tbody")(1,"tr")(2,"p"),e._uU(3,"Sin solicitudes"),e.qZA()()())}function H(a,r){if(1&a&&(e.TgZ(0,"td",42),e._uU(1),e.qZA()),2&a){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.clasificacion_pro.nombre_cla," ")}}function W(a,r){if(1&a&&(e.TgZ(0,"td",42),e._uU(1),e.qZA()),2&a){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.categorias.nombre_cat," ")}}function V(a,r){if(1&a&&(e.TgZ(0,"a",43),e._UZ(1,"i",44),e._uU(2," Crear "),e.qZA()),2&a){const t=e.oxw().$implicit;e.MGl("routerLink","/administracion/evaluacion/fromEval/",t.id,"")}}function ee(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"a",45),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,n=e.oxw(3);return e.KtG(n.mostrarDetalleEvaluacion(o.id))}),e._uU(1," Resultado "),e.qZA()}}function te(a,r){if(1&a&&(e.TgZ(0,"tr",36)(1,"td",37),e._uU(2),e.qZA(),e.TgZ(3,"td",38),e._uU(4),e.qZA(),e.YNc(5,H,2,1,"td",39),e.YNc(6,W,2,1,"td",39),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.qZA(),e.TgZ(15,"td"),e._uU(16),e.qZA(),e.TgZ(17,"td"),e._uU(18),e.qZA(),e.TgZ(19,"td"),e._uU(20),e.qZA(),e.TgZ(21,"td"),e._uU(22),e.qZA(),e.TgZ(23,"td"),e.YNc(24,V,3,1,"a",40),e.YNc(25,ee,2,0,"a",41),e.qZA()()),2&a){const t=r.$implicit;e.xp6(1),e.s9C("title",t.ruc_pro),e.xp6(1),e.hij(" ",t.ruc_pro," "),e.xp6(1),e.s9C("title",t.nombre_pro),e.xp6(1),e.hij(" ",t.nombre_pro," "),e.xp6(1),e.Q6J("ngIf",1==t.fk_tipo_proveedor||2==t.fk_tipo_proveedor),e.xp6(1),e.Q6J("ngIf",3==t.fk_tipo_proveedor),e.xp6(2),e.Oqu(null==t.evaluaciones[0]?null:t.evaluaciones[0].evaluacion_actual_eva),e.xp6(2),e.Oqu(null==t.evaluaciones[0]?null:t.evaluaciones[0].fecha_ultima_evaluacion_eva),e.xp6(2),e.Oqu(null==t.evaluaciones[0]?null:t.evaluaciones[0].responsable_eva),e.xp6(2),e.Oqu(null==t.evaluaciones[0]?null:t.evaluaciones[0].usuario_eva),e.xp6(2),e.Oqu(null==t.evaluaciones[0]?null:t.evaluaciones[0].cantidad_eva),e.xp6(2),e.hij(" ",null==t.evaluaciones[0]?null:t.evaluaciones[0].fecha_vencimiento_evaluacion_eva," "),e.xp6(2),e.Oqu(t.criticidad_pro),e.xp6(2),e.Oqu(null==t.evaluaciones[0]||null==t.evaluaciones[0].estados?null:t.evaluaciones[0].estados.nombre_est),e.xp6(2),e.Q6J("ngIf",null==(null==t.evaluaciones[0]?null:t.evaluaciones[0].fecha_vencimiento_evaluacion_eva)),e.xp6(1),e.Q6J("ngIf",null!=(null==t.evaluaciones[0]?null:t.evaluaciones[0].fecha_vencimiento_evaluacion_eva))}}function ae(a,r){if(1&a&&(e.TgZ(0,"tbody"),e.YNc(1,te,26,16,"tr",35),e.ALo(2,"paginate"),e.qZA()),2&a){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",e.xi3(2,1,t.listaFiltradaEvaluacionProv,e.VKq(4,q,t.page)))}}function ie(a,r){if(1&a&&(e.TgZ(0,"table",32)(1,"thead")(2,"tr")(3,"th",33),e._uU(4,"RUC"),e.qZA(),e.TgZ(5,"th",33),e._uU(6,"Proveedor"),e.qZA(),e.TgZ(7,"th",33),e._uU(8,"Tipo de servicio"),e.qZA(),e.TgZ(9,"th",33),e._uU(10,"Resultado"),e.qZA(),e.TgZ(11,"th",33),e._uU(12," Fecha de "),e._UZ(13,"br"),e._uU(14," \xfaltima evaluaci\xf3n "),e.qZA(),e.TgZ(15,"th",33),e._uU(16,"Responsable"),e._UZ(17,"br"),e._uU(18,"de solicitar"),e._UZ(19,"br"),e._uU(20,"evaluaci\xf3n"),e.qZA(),e.TgZ(21,"th",33),e._uU(22," Cantidad"),e._UZ(23,"br"),e._uU(24," de usuarios "),e.qZA(),e.TgZ(25,"th",33),e._uU(26,"Evaluaciones"),e._UZ(27,"br"),e._uU(28,"contestadas"),e.qZA(),e.TgZ(29,"th",33),e._uU(30," Fecha de "),e._UZ(31,"br"),e._uU(32," vencimiento "),e.qZA(),e.TgZ(33,"th",33),e._uU(34,"Criticidad"),e.qZA(),e.TgZ(35,"th",33),e._uU(36,"Estados"),e.qZA(),e.TgZ(37,"th",33),e._uU(38,"\xa0\xa0Opciones\xa0\xa0"),e.qZA()()(),e.YNc(39,B,4,0,"tbody",34),e.YNc(40,ae,3,6,"tbody",34),e.qZA()),2&a){const t=e.oxw();e.xp6(39),e.Q6J("ngIf",0===t.listaFiltradaEvaluacionProv.length),e.xp6(1),e.Q6J("ngIf",t.listaFiltradaEvaluacionProv.length>0)}}function oe(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"pagination-controls",46),e.NdJ("pageChange",function(o){e.CHM(t);const n=e.oxw();return e.KtG(n.page=o)}),e.qZA()}}function ne(a,r){if(1&a&&(e.TgZ(0,"div",47)(1,"div",51),e._uU(2),e.qZA(),e.TgZ(3,"div",52),e._uU(4),e.qZA(),e._UZ(5,"hr")(6,"br"),e.qZA()),2&a){const t=r.$implicit;e.xp6(2),e.Oqu(t.nombre_cues_eva),e.xp6(2),e.hij(" ",t.ponderacion_final," ")}}const re=function(a,r,t,i){return{"bg-success":a,"bg-primary":r,"bg-warning":t,"bg-danger":i}};function le(a,r){if(1&a&&(e.TgZ(0,"div",47)(1,"div",48)(2,"div",49)(3,"div",50)(4,"div",47)(5,"div",51)(6,"h5"),e._uU(7,"Criterio"),e.qZA()(),e.TgZ(8,"div",52)(9,"h5"),e._uU(10,"Ponderaci\xf3n"),e.qZA()()(),e._UZ(11,"br"),e.qZA(),e.TgZ(12,"div",53),e.YNc(13,ne,7,2,"div",54),e.qZA()()(),e.TgZ(14,"div",55)(15,"div",56)(16,"h3",57)(17,"strong"),e._uU(18),e.qZA()(),e.TgZ(19,"a",58),e._uU(20,"Evaluaci\xf3n actual"),e.qZA()(),e._UZ(21,"br"),e.qZA()()),2&a){const t=e.oxw();e.xp6(13),e.Q6J("ngForOf",t.preguntas),e.xp6(2),e.Q6J("ngClass",e.l5B(3,re,"A"==t.califEvaluacion.evaluacion_actual_eva,"B"==t.califEvaluacion.evaluacion_actual_eva,"C"==t.califEvaluacion.evaluacion_actual_eva,"D"==t.califEvaluacion.evaluacion_actual_eva)),e.xp6(3),e.Oqu(t.califEvaluacion.evaluacion_actual_eva)}}function se(a,r){if(1&a&&(e.TgZ(0,"div",47)(1,"div",59)(2,"strong"),e._uU(3),e.qZA(),e._uU(4),e.qZA(),e._UZ(5,"hr")(6,"br"),e.qZA()),2&a){const t=r.$implicit;e.xp6(3),e.Oqu(t.nombre),e.xp6(1),e.AsE("\xa0\xa0<",t.email,"> \xa0| ",t.estado," ")}}function ce(a,r){if(1&a&&(e.TgZ(0,"div",47)(1,"div",48)(2,"div",49)(3,"div",53),e.YNc(4,se,7,3,"div",54),e.qZA()()()()),2&a){const t=e.oxw();e.xp6(4),e.Q6J("ngForOf",t.nombresUsuarios)}}const O=function(a){return{active:a}};let ue=(()=>{class a{constructor(t,i,o,n,s,m){this.proveedoresCrud=t,this.proveedorService=i,this.processSweetAlert=o,this.cuestionarioService=n,this.resultadoEvaluacionProveedorService=s,this.evaluacionService=m,this.aws=0,this.evaluacion=new e.vpe,this.listaEvaluacion=[],this.listaEvaluacionEstado=[],this.listaFiltradaEvaluacion=[],this.listaEvaluacionProv=[],this.preguntas=[],this.califEvaluacion=new p,this.nombresUsuarios=[],this.listaProv=[],this.listaProvFiltrado=[],this.listaProveedorEva=[],this.evaluacionlis=[],this.listaEvalua=[],this.listaFiltradaEvaluacionProv=[],this.bitacora=new J.n,this.tipoTab=0,this.tipoFiltrado=1,this.ver=2}listProv(){this.evaluacionService.listEvaluacion().subscribe(t=>{console.log(t),this.listaEvalua=t.data})}card(){this.aws=1}listaEva(){this.evaluacionService.listEvaluacionProveedor().subscribe(t=>{console.log("evaluacion",t)})}cargarEvaluaciones(){this.evaluacionService.listEvaluacionProveedor().subscribe(t=>{const i=t.data;console.log("res",i),i.forEach((o,n)=>{const s=o.proveedores[0].tipo_servicio[0],m=o.estados,x=o.fecha_ultima_evaluacion_eva,U=o.fecha_vencimiento_evaluacion_eva,w=t.data[n].proveedores[0].criticidad_pro;this.listaEvaluacion[n]=new p,this.listaEvaluacion[n].checked=!1,this.listaEvaluacion[n].proveedores=new b.I,this.listaEvaluacion[n].proveedores=o.proveedores[0],this.listaEvaluacion[n].fecha_ultima_evaluacion_eva=x,this.listaEvaluacion[n].fecha_vencimiento_evaluacion_eva=U,this.listaEvaluacion[n].cantidad_eva=Number(o.cantidad_eva),this.listaEvaluacion[n].proveedores.tipo_servicio=new Z.R,this.listaEvaluacion[n].proveedores.tipo_servicio=s,this.listaEvaluacion[n].estados=new f.G,this.listaEvaluacion[n].estados=m,null===o.fecha_vencimiento_evaluacion_eva&&(this.listaEvaluacion[n].fecha_vencimiento_evaluacion_eva="-"),null===o.fecha_ultima_evaluacion_eva&&(this.listaEvaluacion[n].fecha_ultima_evaluacion_eva="-"),null===w&&(this.listaEvaluacion[n].proveedores.criticidad_pro="-"),this.listaEvaluacion[n].resultado_eva=null===o.resultado_eva?"-":o.resultado_eva,this.listaEvaluacion[n].responsable_eva=null===o.responsable_eva?"-":o.responsable_eva,this.listaEvaluacion[n].usuario_eva=null===o.usuario_eva?"-":o.usuario_eva,null===o.proveedores.criticidad_pro&&(this.listaEvaluacion[n].proveedores.criticidad_pro="-")})})}filtrarPorEmpresa(t){const i=t.target.value;""===i?this.listaFiltradaEvaluacionProv=this.listaEvalua:46==(i.keyCode||i.charCode||i.which)||8==(i.keyCode||i.charCode||i.which)?this.listaFiltradaEvaluacionProv=this.listaEvalua.filter(o=>o.ruc_pro.toLowerCase().includes(i.toLowerCase())):((this.esNumerico(i)||this.esAlfanumerico(i))&&(this.listaFiltradaEvaluacionProv=this.listaEvalua.filter(o=>o.ruc_pro.toLowerCase().includes(i.toLowerCase()))),this.esString(i)&&(this.listaFiltradaEvaluacionProv=this.listaEvalua.filter(o=>o.nombre_pro.toLowerCase().includes(i.toLowerCase()))))}cambioFiltradoEstado(t){const i=t.target.value;this.aws=1,""===i?this.listaFiltradaEvaluacionProv=this.listaEvalua:(46==(i.keyCode||i.charCode||i.which)||8==(i.keyCode||i.charCode||i.which)||this.esString(i)||this.esEspacio(i))&&(this.listaFiltradaEvaluacionProv=this.listaEvalua.filter(o=>o.evaluaciones[0]?.estados?.nombre_est.toLowerCase().includes(i.toLowerCase())))}cambioFiltrado(t){switch(this.tipoFiltrado=t,t){case 1:this.listProv();break;case 2:this.cargarEvaluaciones()}}ngOnInit(){this.listProv()}borrar(t,i){}fechaActual(){var t=new Date;return t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()+" "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()}esNumerico(t){return/^-?\d+$/.test(t)}esString(t){return!!/^[a-zA-Z]+$/.test(t)}esAlfanumerico(t){return!(!/^[-_ a-zA-Z0-9]+$/.test(t)||this.esNumerico(t)||this.esString(t))}creacionEvaluacion(){const t=new p;this.evaluacion.emit(t)}mostrarDetalleEvaluacion(t){this.preguntas=[],console.log(this.preguntas=[]),this.califEvaluacion=new p,this.resultadoEvaluacionProveedorService.obtenerResultEvaluacionProveedor(t).subscribe(i=>{this.resultadoEvaluacionProveedorService.obtenerUsuariosEvaluacion(t).subscribe(o=>{this.nombresUsuarios=o.data.usuarios,this.califEvaluacion=i.data.proveedor,i.data.template_final.forEach((s,m)=>{this.preguntas[m]=s.template,this.preguntas[m].ponderacion_final=s.ponderacion_final}),this.preguntas.length>100&&(this.preguntas[0]=new L)})})}cambiarTab(t){this.tipoTab=t}esEspacio(t){return!(!/\s/g.test(t)||this.esNumerico(t)||this.esString(t))}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(M.p),e.Y36(u.z),e.Y36(Y.J),e.Y36(P),e.Y36(Q),e.Y36(y))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-list-eval"]],inputs:{listaEvaluacion:"listaEvaluacion",listaEvaluacionProv:"listaEvaluacionProv",preguntas:"preguntas",califEvaluacion:"califEvaluacion",listaProv:"listaProv"},outputs:{evaluacion:"evaluacion"},decls:54,vars:11,consts:[[1,"container","my-2"],[1,"row","px-3","py-2","align-items-center","table-success"],["align","left",1,"col-6","px-1"],[1,"h6","font-weight-bold","mb-0"],[1,"h6","font-weight-bold","mb-0","color-azul"],[1,"col-md-4"],[1,"input-group","mb-3"],["type","text",1,"form-control","form-control-lg",3,"keyup"],["type","submit",1,"input-group-text"],[1,"bi","bi-search"],["id","listamodelos"],["value","Por Evaluar"],["value","Solicitado"],["value","En Evaluaci\xf3n"],["value","Finalizado"],[1,"col-md-3"],["role","group","aria-label","First group",1,"btn-group","mb-3"],["type","text","list","listamodelos","placeholder","Buscar por Estado",1,"form-control",3,"keyup"],["class","table table-condensed",4,"ngIf"],["class","my-pagination","previousLabel","Anterior","nextLabel","Siguiente",3,"pageChange",4,"ngIf"],["id","resultadoModal","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-xl"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title","text-black"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"container"],[1,"nav","nav-tabs"],[1,"nav-item"],[1,"nav-link",3,"ngClass","click"],["class","row",4,"ngIf"],[1,"table","table-condensed"],["scope","col"],[4,"ngIf"],["class","align-middle",4,"ngFor","ngForOf"],[1,"align-middle"],["scope","row",1,"whitespace-nowrap","menos-lenght-texto-ruc",3,"title"],[1,"menos-lenght-texto-nombre",3,"title"],["class","whitespace-nowrap menos-lenght-texto-nombre",4,"ngIf"],["type","button","class","custom-css btn btn-primary",3,"routerLink",4,"ngIf"],["type","button","class","custom-css btn btn-primary nuevo-color","data-bs-toggle","modal","data-bs-target","#resultadoModal",3,"click",4,"ngIf"],[1,"whitespace-nowrap","menos-lenght-texto-nombre"],["type","button",1,"custom-css","btn","btn-primary",3,"routerLink"],[1,"bi","bi-body-text"],["type","button","data-bs-toggle","modal","data-bs-target","#resultadoModal",1,"custom-css","btn","btn-primary","nuevo-color",3,"click"],["previousLabel","Anterior","nextLabel","Siguiente",1,"my-pagination",3,"pageChange"],[1,"row"],[1,"col-sm-8"],[1,"pl-table"],[1,"pl-thead"],[1,"col-9"],["align","center",1,"col"],[1,"pl-tbody"],["class","row",4,"ngFor","ngForOf"],[1,"col-sm-4"],[1,"card","text-center","cuadrado",3,"ngClass"],[1,"card-title","text-white","display-1"],[1,"btn","bg-transparent","text-white"],[1,"col-12"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"label",3)(4,"h3"),e._uU(5,"Administraci\xf3n de evaluaci\xf3n de proveedores"),e.qZA()(),e._UZ(6,"br"),e.TgZ(7,"label",4)(8,"h4"),e._uU(9,"TORRES & TORRES"),e.qZA()()()(),e.TgZ(10,"div",1),e._UZ(11,"br")(12,"br")(13,"br"),e.TgZ(14,"div",5)(15,"div",6)(16,"input",7),e.NdJ("keyup",function(n){return i.filtrarPorEmpresa(n)}),e.qZA(),e.TgZ(17,"button",8),e._UZ(18,"i",9),e.qZA()()(),e.TgZ(19,"datalist",10),e._UZ(20,"option",11)(21,"option",12)(22,"option",13)(23,"option",14),e.qZA(),e.TgZ(24,"div",15),e._uU(25," \xa0\xa0 "),e.TgZ(26,"div",16)(27,"input",17),e.NdJ("keyup",function(n){return i.cambioFiltradoEstado(n)}),e.qZA()()(),e._UZ(28,"br")(29,"br"),e.YNc(30,X,41,2,"table",18),e.YNc(31,ie,41,2,"table",18),e.YNc(32,oe,1,0,"pagination-controls",19),e.qZA()(),e._UZ(33,"br")(34,"br"),e.TgZ(35,"div",20)(36,"div",21)(37,"div",22)(38,"div",23)(39,"h5",24),e._uU(40," Detalle de la evaluaci\xf3n "),e.qZA(),e._UZ(41,"button",25),e.qZA(),e.TgZ(42,"div",26)(43,"div",27)(44,"ul",28)(45,"li",29)(46,"a",30),e.NdJ("click",function(){return i.cambiarTab(0)}),e._uU(47," Evaluaci\xf3n "),e.qZA()(),e.TgZ(48,"li",29)(49,"a",30),e.NdJ("click",function(){return i.cambiarTab(1)}),e._uU(50," Usuarios "),e.qZA()()(),e._UZ(51,"br"),e.YNc(52,le,22,8,"div",31),e.YNc(53,ce,5,1,"div",31),e.qZA()()()()()),2&t&&(e.xp6(30),e.Q6J("ngIf",0==i.listaFiltradaEvaluacionProv.length),e.xp6(1),e.Q6J("ngIf",i.listaFiltradaEvaluacionProv.length>0),e.xp6(1),e.Q6J("ngIf",i.listaEvalua.length>8),e.xp6(14),e.Q6J("ngClass",e.VKq(7,O,0==i.tipoTab)),e.xp6(3),e.Q6J("ngClass",e.VKq(9,O,1==i.tipoTab)),e.xp6(3),e.Q6J("ngIf",0==i.tipoTab),e.xp6(1),e.Q6J("ngIf",1==i.tipoTab))},dependencies:[v.mk,v.sg,v.O5,c.yS,h.YN,h.Kr,A.LS,A._s],styles:[".table-condensed[_ngcontent-%COMP%], label[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%], a[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px}button.selected-custom[_ngcontent-%COMP%]{border-bottom:3px solid rgb(103,159,220);text-align:center}a.tamano-button[_ngcontent-%COMP%]{border-radius:28px;display:inline-block;padding:8px 13px}td.menos-lenght-texto-ruc[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:135px}td.menos-lenght-texto-nombre[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:110px}"]}),a})();class C{constructor(){this.nombre="",this.email=""}}let ve=(()=>{class a{constructor(){this.listaProv=[],this.listaProvFiltrado=[],this.provSelec=new e.vpe,this.selecProv=0}ngOnInit(){}seleccionarProv(t){this.selecProv=t.id,this.listaProv.forEach(i=>{i.index=0}),t.index=t.id,this.provSelec.emit(t)}filtrarPorProveedor(t){const i=t.target.value;""===i?(this.listaProvFiltrado=this.listaProv,console.log(this.listaProvFiltrado)):46==(i.keyCode||i.charCode||i.which)||8==(i.keyCode||i.charCode||i.which)?this.listaProvFiltrado=this.listaProv.filter(o=>o.ruc_pro.toLowerCase().includes(i.toLowerCase())):((this.esNumerico(i)||this.esAlfanumerico(i))&&(this.listaProvFiltrado=this.listaProv.filter(o=>o.ruc_pro.toLowerCase().includes(i.toLowerCase()))),this.esString(i)&&(this.listaProvFiltrado=this.listaProv.filter(o=>o.nombre_pro.toLowerCase().includes(i.toLowerCase()))))}esNumerico(t){return/^-?\d+$/.test(t)}esAlfanumerico(t){return!(!/^[-_ a-zA-Z0-9]+$/.test(t)||this.esNumerico(t)||this.esString(t))}esString(t){return!!/^[a-zA-Z]+$/.test(t)}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-prov-eval"]],inputs:{listaProv:"listaProv"},outputs:{provSelec:"provSelec"},decls:0,vars:0,template:function(t,i){},styles:[".menos-lenght-texto[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:478px}div.background-color[_ngcontent-%COMP%]{background-color:#f6f6f5}"]}),a})();function pe(a,r){if(1&a&&(e.TgZ(0,"li",15)(1,"a",16),e._uU(2),e.qZA()()),2&a){const t=r.$implicit;e.xp6(2),e.Oqu(t.nombre_cues_eva)}}function _e(a,r){if(1&a&&(e.TgZ(0,"div",11)(1,"div",12)(2,"ul",13),e.YNc(3,pe,3,1,"li",14),e.qZA()()()),2&a){const t=e.oxw();e.xp6(3),e.Q6J("ngForOf",t.preguntas)}}function de(a,r){if(1&a&&(e.TgZ(0,"li",15)(1,"a",16),e._uU(2),e.qZA()()),2&a){const t=r.$implicit;e.xp6(2),e.Oqu(t.nombre_cues_eva)}}function he(a,r){if(1&a&&(e.TgZ(0,"div",17)(1,"div",12)(2,"ul",13),e.YNc(3,de,3,1,"li",14),e.qZA()()()),2&a){const t=e.oxw();e.xp6(3),e.Q6J("ngForOf",t.preguntas)}}function ge(a,r){if(1&a&&(e.TgZ(0,"li",15)(1,"a",16),e._uU(2),e.qZA()()),2&a){const t=r.$implicit;e.xp6(2),e.Oqu(t.nombre_cues_eva)}}function me(a,r){if(1&a&&(e.TgZ(0,"div",18)(1,"div",12)(2,"ul",13),e.YNc(3,ge,3,1,"li",14),e.qZA()()()),2&a){const t=e.oxw();e.xp6(3),e.Q6J("ngForOf",t.preguntas)}}let fe=(()=>{class a{constructor(){this.preguntas=[],this.tipoPregunta=new e.vpe,this.cambioAcordeon=!1,this.listaEvaluacion=[]}ngOnChanges(t){}ngOnInit(){}abrirAcordeon(t){this.cambioAcordeon=!0,this.tipoPregunta.emit(t)}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-preg-eval"]],inputs:{preguntas:"preguntas"},outputs:{tipoPregunta:"tipoPregunta"},features:[e.TTD],decls:18,vars:3,consts:[["id","accordionExample",1,"accordion"],[1,"accordion-item"],["id","headingOne",1,"accordion-header",3,"click"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseOne","aria-expanded","true","aria-controls","collapseOne",1,"accordion-button","collapsed"],["id","collapseOne","class","accordion-collapse collapse","aria-labelledby","headingOne","data-bs-parent","#accordionExample",4,"ngIf"],["id","headingTwo",1,"accordion-header",3,"click"],["data-bs-toggle","collapse","data-bs-target","#collapseTwo","aria-expanded","false","aria-controls","collapseTwo","type","button",1,"accordion-button","collapsed"],["id","collapseTwo","class","accordion-collapse collapse","aria-labelledby","headingTwo","data-bs-parent","#accordionExample",4,"ngIf"],["id","headingThree",1,"accordion-header",3,"click"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseThree","aria-expanded","false","aria-controls","collapseThree",1,"accordion-button","collapsed"],["id","collapseThree","class","accordion-collapse collapse","aria-labelledby","headingThree","data-bs-parent","#accordionExample",4,"ngIf"],["id","collapseOne","aria-labelledby","headingOne","data-bs-parent","#accordionExample",1,"accordion-collapse","collapse"],[1,"accordion-body"],[1,"nav","flex-column"],["class","nav-item",4,"ngFor","ngForOf"],[1,"nav-item"],[1,"nav-link","text-start"],["id","collapseTwo","aria-labelledby","headingTwo","data-bs-parent","#accordionExample",1,"accordion-collapse","collapse"],["id","collapseThree","aria-labelledby","headingThree","data-bs-parent","#accordionExample",1,"accordion-collapse","collapse"]],template:function(t,i){1&t&&(e._UZ(0,"br")(1,"br"),e.TgZ(2,"div",0)(3,"div",1)(4,"h2",2),e.NdJ("click",function(){return i.abrirAcordeon(1)}),e.TgZ(5,"button",3),e._uU(6," Evaluaci\xf3n proveedor general "),e.qZA()(),e.YNc(7,_e,4,1,"div",4),e.qZA(),e.TgZ(8,"div",1)(9,"h2",5),e.NdJ("click",function(){return i.abrirAcordeon(2)}),e.TgZ(10,"button",6),e._uU(11," Evaluaci\xf3n proveedor transporte "),e.qZA()(),e.YNc(12,he,4,1,"div",7),e.qZA(),e.TgZ(13,"div",1)(14,"h2",8),e.NdJ("click",function(){return i.abrirAcordeon(3)}),e.TgZ(15,"button",9),e._uU(16," Evaluaci\xf3n proveedor de carga "),e.qZA()(),e.YNc(17,me,4,1,"div",10),e.qZA()()),2&t&&(e.xp6(7),e.Q6J("ngIf",i.cambioAcordeon),e.xp6(5),e.Q6J("ngIf",i.cambioAcordeon),e.xp6(5),e.Q6J("ngIf",i.cambioAcordeon))},dependencies:[v.sg,v.O5]}),a})();function be(a,r){1&a&&e._UZ(0,"label",20)}function Ee(a,r){1&a&&(e.TgZ(0,"label",20),e._uU(1," Seleccione template. "),e.qZA())}function Ze(a,r){1&a&&(e.TgZ(0,"label",20),e._uU(1," Ingrese correo. "),e.qZA())}function Te(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"app-prov-eval",21),e.NdJ("provSelec",function(o){e.CHM(t);const n=e.oxw();return e.KtG(n.proveedorSeleccionado(o))}),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("listaProv",t.listaProv)}}function Pe(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"app-preg-eval",22),e.NdJ("tipoPregunta",function(o){e.CHM(t);const n=e.oxw();return e.KtG(n.tipoPreguntas(o))}),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("preguntas",t.preguntas)}}function Ae(a,r){1&a&&(e.TgZ(0,"p",35),e._uU(1," Ingresar nombre. "),e.qZA())}function Ce(a,r){1&a&&(e.TgZ(0,"p",35),e._uU(1," Ingresar email. "),e.qZA())}function xe(a,r){1&a&&(e.TgZ(0,"p",35),e._uU(1," Ingresar rol. "),e.qZA())}function Ue(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"div",1)(1,"div",17)(2,"div",24)(3,"input",25),e.NdJ("ngModelChange",function(o){const s=e.CHM(t).$implicit;return e.KtG(s.nombre=o)}),e.qZA()(),e.YNc(4,Ae,2,0,"p",26),e.qZA(),e.TgZ(5,"div",17)(6,"div",24)(7,"input",27),e.NdJ("ngModelChange",function(o){const s=e.CHM(t).$implicit;return e.KtG(s.email=o)}),e.qZA(),e._uU(8,"\xa0 "),e.qZA(),e.YNc(9,Ce,2,0,"p",26),e.qZA(),e.TgZ(10,"div",28)(11,"div",24)(12,"select",29),e.NdJ("ngModelChange",function(o){const s=e.CHM(t).$implicit;return e.KtG(s.rol=o)}),e._UZ(13,"option",30),e.TgZ(14,"option",31),e._uU(15,"Usuario Final "),e.qZA(),e.TgZ(16,"option",32),e._uU(17,"Usuario Compras"),e.qZA()(),e.TgZ(18,"button",33),e.NdJ("click",function(){const n=e.CHM(t).index,s=e.oxw(2);return e.KtG(s.borrar(n))}),e._UZ(19,"i",34),e.qZA()(),e.YNc(20,xe,2,0,"p",26),e.qZA()()}if(2&a){const t=r.$implicit,i=e.oxw(2);e.xp6(3),e.Q6J("ngModel",t.nombre),e.xp6(1),e.Q6J("ngIf",i.submitted&&""==t.nombre),e.xp6(3),e.Q6J("ngModel",t.email),e.xp6(2),e.Q6J("ngIf",i.submitted&&""==t.email),e.xp6(3),e.Q6J("ngModel",t.rol),e.xp6(8),e.Q6J("ngIf",i.submitted&&0==t.rol)}}function we(a,r){if(1&a&&(e.TgZ(0,"div"),e.YNc(1,Ue,21,6,"div",23),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.listaUsuarioResolverEva)}}function Fe(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"a",36),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.finalizar())}),e._uU(1," Terminar "),e.qZA()}}let N=(()=>{class a{constructor(t,i,o,n){this.cuestionarioService=t,this.sendEvalProvService=i,this.route=o,this.router=n,this.tipoTab=0,this.submitted=!1,this.preguntas=[],this.listaProv=[],this.tipoPregunta=new e.vpe,this.evaluacion=new e.vpe,this.listaPreguntasGeneral=[],this.listaPreguntasTranspo=[],this.listaPreguntasAgenteC=[],this.listaPreguntas=[],this.listaUsuarioResolverEva=[],this.enviarEvaluacionProv=new _,this.enviarEvaluacionProv1=new C,this.n=0}ngOnInit(){}salir(){let t=new p;t.proveedores.nombre_pro="uwu",this.evaluacion.emit(t),this.router.navigate(["/administracion/evaluacion"])}cambiarTab(t){t?this.tipoTab++:this.tipoTab--}proveedorSeleccionado(t){this.enviarEvaluacionProv.fk_proveedor=t.id,this.enviarEvaluacionProv.nombre=t.nombre_pro}tipoPreguntas(t){switch(this.tipoPregunta.emit(t),t){case 1:this.enviarEvaluacionProv.template=7;break;case 2:this.enviarEvaluacionProv.template=8;break;case 3:this.enviarEvaluacionProv.template=9}}finalizar(){if(this.submitted=!0,this.listaUsuarioResolverEva.length>0){let t=!1;if(this.listaUsuarioResolverEva.forEach(i=>{(""===i.nombre||""===i.email)&&(t=!0)}),t)return;this.enviarMultiplesEvaluacionesProv(this.listaUsuarioResolverEva.length,0)}}enviarMultiplesEvaluacionesProv(t,i){if(i<t){let o=new C;o.nombre=this.listaUsuarioResolverEva[i].nombre,o.email=this.listaUsuarioResolverEva[i].email,o.rol=this.listaUsuarioResolverEva[i].rol,i+=1;const n=this.route.snapshot.paramMap.get("id");this.sendEvalProvService.enviarEvaluacion(o,Number(n)).subscribe(s=>{this.enviarMultiplesEvaluacionesProv(t,i),console.log(JSON.stringify(s)),console.log("Creado"),console.log("nuevo",o),this.router.navigate(["/administracion/evaluacion"])},s=>{console.log(JSON.stringify(s))})}}nuevoDestinatario(){this.n=1;let t=new C;this.listaUsuarioResolverEva.push(t)}borrar(t){this.listaUsuarioResolverEva.splice(t,1)}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(P),e.Y36(F),e.Y36(c.gz),e.Y36(c.F0))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-from-eval"]],inputs:{preguntas:"preguntas",listaProv:"listaProv"},outputs:{tipoPregunta:"tipoPregunta",evaluacion:"evaluacion"},decls:35,vars:7,consts:[[1,"container","my-2"],[1,"row"],["align","left",1,"col-md-12"],["role","group","aria-label","First group",1,"btn-group","mb-3"],["type","button",1,"btn","btn-secondary-outline","customize",2,"text-align","center",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","26","height","26","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-arrow-left"],["fill-rule","evenodd","d","M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8z"],["type","button",1,"btn",2,"text-align","center"],[1,"h6","font-weight-bold","mb-0"],["class","font-weight-bold mb-0","style","font-size: 124%;",4,"ngIf"],["align","center",1,"row","d-flex","justify-content-center","align-items-center"],[1,"col-md-12"],[3,"listaProv","provSelec",4,"ngIf"],[3,"preguntas","tipoPregunta",4,"ngIf"],[1,"input-group","mb-3"],[4,"ngIf"],["align","right",1,"col-md-12"],[1,"col"],["type","button",1,"btn","btn-outline-info",3,"click"],["type","button","class","custom-css btn btn-primary",3,"click",4,"ngIf"],[1,"font-weight-bold","mb-0",2,"font-size","124%"],[3,"listaProv","provSelec"],[3,"preguntas","tipoPregunta"],["class","row",4,"ngFor","ngForOf"],[1,"input-group","mb-2","input-group-lg"],["type","text","placeholder","Ingresar nombre","aria-label","Ingresar nombre","aria-describedby","basic-addon1",1,"form-control",3,"ngModel","ngModelChange"],["class","text-danger",4,"ngIf"],["type","text","placeholder","Ingresar correo","aria-label","Ingresar correo","aria-describedby","basic-addon1",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-sm-3"],["name","etapa",1,"form-select",3,"ngModel","ngModelChange"],["value","0"],["value","1"],["value","2"],["type","button",1,"btn","btn-outline-danger",3,"click"],[1,"bi","bi-trash3"],[1,"text-danger"],["type","button",1,"custom-css","btn","btn-primary",3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"button",4),e.NdJ("click",function(){return i.salir()}),e.O4$(),e.TgZ(5,"svg",5),e._UZ(6,"path",6),e.qZA()(),e.kcU(),e.TgZ(7,"button",7),e._uU(8," Evaluaciones "),e.qZA()(),e._UZ(9,"br"),e.TgZ(10,"label",8)(11,"h3"),e._uU(12,"Nueva evaluaci\xf3n"),e.qZA()(),e._UZ(13,"br"),e.YNc(14,be,1,0,"label",9),e.YNc(15,Ee,2,0,"label",9),e.YNc(16,Ze,2,0,"label",9),e.qZA(),e.TgZ(17,"div",10)(18,"div",11),e.YNc(19,Te,1,1,"app-prov-eval",12),e.YNc(20,Pe,1,1,"app-preg-eval",13),e.TgZ(21,"div",14)(22,"div",11),e._UZ(23,"br")(24,"br"),e.YNc(25,we,2,1,"div",15),e.qZA(),e.TgZ(26,"div",16)(27,"div",17)(28,"button",18),e.NdJ("click",function(){return i.nuevoDestinatario()}),e.TgZ(29,"strong"),e._uU(30,"+"),e.qZA()()()()()(),e.TgZ(31,"div",11),e._UZ(32,"br")(33,"br"),e.YNc(34,Fe,2,0,"a",19),e.qZA()()()()),2&t&&(e.xp6(14),e.Q6J("ngIf",0===i.tipoTab),e.xp6(1),e.Q6J("ngIf",1===i.tipoTab),e.xp6(1),e.Q6J("ngIf",2===i.tipoTab),e.xp6(3),e.Q6J("ngIf",0===i.tipoTab),e.xp6(1),e.Q6J("ngIf",1===i.tipoTab),e.xp6(5),e.Q6J("ngIf",i.listaUsuarioResolverEva.length>0),e.xp6(9),e.Q6J("ngIf",1==i.n))},dependencies:[v.sg,v.O5,h.YN,h.Kr,h.Fj,h.EJ,h.JJ,h.On,ve,fe]}),a})();function ye(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"app-from-eval",2),e.NdJ("evaluacion",function(o){e.CHM(t);const n=e.oxw();return e.KtG(n.mostrarComponente(o))})("tipoPregunta",function(o){e.CHM(t);const n=e.oxw();return e.KtG(n.tipoPreguntas(o))}),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("preguntas",t.listaPreguntas)("listaProv",t.proveedores)}}function qe(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"app-list-eval",3),e.NdJ("evaluacion",function(o){e.CHM(t);const n=e.oxw();return e.KtG(n.mostrarComponente(o))}),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("listaEvaluacion",t.listaEvaluacion)}}const Oe=[{path:"",component:(()=>{class a{constructor(t,i,o,n){this.proveedorService=t,this.cuestionarioService=i,this.sendEvalProvService=o,this.evaluacionService=n,this.objeto=new p,this.enviarEvaluacionProv=new _,this.proveedores=[],this.listaPreguntasGeneral=[],this.listaPreguntasTranspo=[],this.listaPreguntasAgenteC=[],this.listaPreguntas=[],this.listaEvaluacion=[],this.tipoTab=0,this.mostrarForm=!1}ngOnInit(){this.cargarProveedores()}mostrarComponente(t){switch(t.proveedores.nombre_pro){case"":this.objeto=new p,this.mostrarForm=!0;break;case"Borrado":this.objeto=new p;break;case"uwu":this.mostrarForm=!1;break;default:this.objeto=t,this.mostrarForm=!0}}cargarProveedores(){this.proveedorService.listProveedores().subscribe(t=>{let o=t.data;o.forEach(n=>{n.urgente_pro=""+n.urgente_pro=="0"?0:1}),this.proveedores=o},t=>{console.log(JSON.stringify(t))})}cargarEvaluaciones(){this.evaluacionService.listEvaluacionProveedor().subscribe(t=>{t.data.forEach((o,n)=>{const s=o.proveedores[0].tipo_servicio[0],m=o.estados,x=o.fecha_ultima_evaluacion_eva,U=o.fecha_vencimiento_evaluacion_eva,w=t.data[n].proveedores[0].criticidad_pro;this.listaEvaluacion[n]=new p,this.listaEvaluacion[n].checked=!1,this.listaEvaluacion[n].proveedores=new b.I,this.listaEvaluacion[n].proveedores=o.proveedores[0],this.listaEvaluacion[n].fecha_ultima_evaluacion_eva=x,this.listaEvaluacion[n].fecha_vencimiento_evaluacion_eva=U,this.listaEvaluacion[n].cantidad_eva=Number(o.cantidad_eva),this.listaEvaluacion[n].proveedores.tipo_servicio=new Z.R,this.listaEvaluacion[n].proveedores.tipo_servicio=s,this.listaEvaluacion[n].estados=new f.G,this.listaEvaluacion[n].estados=m,null===o.fecha_vencimiento_evaluacion_eva&&(this.listaEvaluacion[n].fecha_vencimiento_evaluacion_eva="-"),null===o.fecha_ultima_evaluacion_eva&&(this.listaEvaluacion[n].fecha_ultima_evaluacion_eva="-"),null===w&&(this.listaEvaluacion[n].proveedores.criticidad_pro="-"),this.listaEvaluacion[n].resultado_eva=null===o.resultado_eva?"-":o.resultado_eva,this.listaEvaluacion[n].responsable_eva=null===o.responsable_eva?"-":o.responsable_eva,this.listaEvaluacion[n].usuario_eva=null===o.usuario_eva?"-":o.usuario_eva,null===o.proveedores.criticidad_pro&&(this.listaEvaluacion[n].proveedores.criticidad_pro="-")})})}finalizar(){""!=this.enviarEvaluacionProv.email&&this.sendEvalProvService.enviarEvaluacionProv(this.enviarEvaluacionProv).subscribe(t=>{console.log(JSON.stringify(t))},t=>{console.log(JSON.stringify(t))})}proveedorSeleccionado(t){this.enviarEvaluacionProv.fk_proveedor=t.id,this.enviarEvaluacionProv.nombre=t.nombre_pro}cambiarTab(t){t?this.tipoTab++:this.tipoTab--}tipoPreguntas(t){switch(t){case 1:this.listaPreguntasGeneral.length>0?(this.listaPreguntas=this.listaPreguntasGeneral,this.enviarEvaluacionProv.template=7):this.cuestionarioService.listPreguntas(7).subscribe(i=>{this.enviarEvaluacionProv.template=7,this.listaPreguntasGeneral=i.data,this.listaPreguntas=this.listaPreguntasGeneral});break;case 2:this.listaPreguntasTranspo.length>0?(this.listaPreguntas=this.listaPreguntasTranspo,this.enviarEvaluacionProv.template=8):this.cuestionarioService.listPreguntas(8).subscribe(i=>{this.enviarEvaluacionProv.template=8,this.listaPreguntasTranspo=i.data,this.listaPreguntas=this.listaPreguntasTranspo});break;case 3:this.listaPreguntasAgenteC.length>0?(this.listaPreguntas=this.listaPreguntasAgenteC,this.enviarEvaluacionProv.template=9):this.cuestionarioService.listPreguntas(9).subscribe(i=>{this.enviarEvaluacionProv.template=9,this.listaPreguntasAgenteC=i.data,this.listaPreguntas=this.listaPreguntasAgenteC})}}creacionEvaluacion(){this.enviarEvaluacionProv=new _,this.enviarEvaluacionProv.nombre="",this.enviarEvaluacionProv.template=0,this.tipoTab=0}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(u.z),e.Y36(P),e.Y36(F),e.Y36(y))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-admi-eval"]],decls:2,vars:2,consts:[[3,"preguntas","listaProv","evaluacion","tipoPregunta",4,"ngIf"],[3,"listaEvaluacion","evaluacion",4,"ngIf"],[3,"preguntas","listaProv","evaluacion","tipoPregunta"],[3,"listaEvaluacion","evaluacion"]],template:function(t,i){1&t&&(e.YNc(0,ye,1,2,"app-from-eval",0),e.YNc(1,qe,1,1,"app-list-eval",1)),2&t&&(e.Q6J("ngIf",i.mostrarForm),e.xp6(1),e.Q6J("ngIf",!i.mostrarForm))},dependencies:[v.O5,ue,N]}),a})()},{path:"fromEval/:id",component:N}];let Ne=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[c.Bz.forChild(Oe),c.Bz]}),a})(),Se=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[v.ez,Ne,h.UX,h.u5,A.JX]}),a})()},8573:(S,E,l)=>{l.d(E,{z:()=>Z});var v=l(529),c=l(5625),b=l(9019),f=l(1571),p=l(7599);let Z=(()=>{class _{constructor(u,d){this.http=u,this.router=d,this.baseUrl=b.N.urlGlobal+"proveedores",this.url=`${this.baseUrl}`,this.httpOptions={headers:new v.WM({"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer "+localStorage.getItem("token")})}}listProveedores(){return this.http.get(this.url,this.httpOptions).pipe((0,c.X)(1))}listProveedoresBorrados(){return this.http.get(b.N.urlGlobal+"delete-proveedor",this.httpOptions).pipe((0,c.X)(1))}crearProveedor(u){return 0===u.id?this.http.post(this.url+"/"+u.fk_tipo_proveedor,u,this.httpOptions).pipe((0,c.X)(1)):this.http.put(this.url+"/"+u.id,u,this.httpOptions).pipe((0,c.X)(1))}borrarProveedor(u){return this.http.delete(this.url+"/"+u,this.httpOptions).pipe((0,c.X)(1))}}return _.\u0275fac=function(u){return new(u||_)(f.LFG(v.eN),f.LFG(p.F0))},_.\u0275prov=f.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})()}}]);