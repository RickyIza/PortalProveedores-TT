"use strict";(self.webpackChunkPlataformaIntegralProveedores=self.webpackChunkPlataformaIntegralProveedores||[]).push([[600],{9600:(Qo,V,_)=>{_.r(V),_.d(V,{AdmiCaliModule:()=>Io,AppModule:()=>Oo});var v=_(6895),T=_(7599),C=_(8499),P=_(3804);class F{constructor(){this.index=0,this.fk_estado=0,this.fk_proveedor=0,this.aprobado=!1,this.dias_solicitud_cal=0,this.fecha_vencimiento_pro="",this.estados=new P.G,this.dias_cal=0,this.proveedores=[]}}var t=_(1571);let W=(()=>{class i{constructor(){this.listaCategoriaDocuments=[],this.seCargoProveedores=!1}setCargoListaCategoriasDocuments(o){this.listaCategoriaDocuments=o}getCargoListaCategoriasDocuments(){return this.listaCategoriaDocuments}seCargoListaCategoriasDocuments(){return this.seCargoProveedores}cargoListaCategoriasDocuments(o){this.seCargoProveedores=o}}return i.\u0275fac=function(o){return new(o||i)},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var N=_(3988),g=_(529),b=_(5625),A=_(9019);let tt=(()=>{class i{constructor(o,e){this.http=o,this.router=e,this.baseUrl=A.N.urlGlobal+"categoria-documentos",this.url=`${this.baseUrl}`,this.httpOptions={headers:new g.WM({"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer "+localStorage.getItem("token")})}}list(){return this.http.get(this.url,this.httpOptions).pipe((0,b.X)(1))}}return i.\u0275fac=function(o){return new(o||i)(t.LFG(g.eN),t.LFG(T.F0))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Q=(()=>{class i{constructor(o){this.http=o,this.baseUrl=A.N.urlGlobal+"lista-documentos",this.url=`${this.baseUrl}`,this.httpOptions={headers:new g.WM({"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer "+localStorage.getItem("token")})}}listDocumento(){return this.http.get(this.url,this.httpOptions).pipe((0,b.X)(1))}}return i.\u0275fac=function(o){return new(o||i)(t.LFG(g.eN))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var ot=_(7658),et=_(7843);let J=(()=>{class i{constructor(o,e){this.http=o,this.router=e,this.baseUrl=A.N.urlGlobal+"calificacion-proveedor",this.url=`${this.baseUrl}`,this.httpOptions={headers:new g.WM({"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer "+localStorage.getItem("token")})}}list(){return this.http.get(this.url,this.httpOptions).pipe((0,b.X)(1))}retrieve(o){return this.http.get(this.url+"-data/"+o,this.httpOptions).pipe((0,b.X)(1))}calificarProveedor(o,e){return this.http.put(A.N.urlGlobal+"calificar-proveedor/"+o,e,this.httpOptions).pipe((0,b.X)(1))}listDocSubidos(o){return this.http.get(A.N.urlGlobal+"documentos-calificacion-proveedor/"+o,this.httpOptions).pipe((0,b.X)(1))}listDocCalifica(){return this.http.get(A.N.urlGlobal+"documentos-calificacion/",this.httpOptions).pipe((0,b.X)(1))}}return i.\u0275fac=function(o){return new(o||i)(t.LFG(g.eN),t.LFG(T.F0))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var it=_(8573),st=_(6222),rt=_(2054),S=_(4094),z=_(9012),nt=_(2140),ct=_(8290),x=_(7579);let y=(()=>{class i{constructor(){this.listaTipoServicio$=new x.x,this.listaTipoServicio=[],this.listaEstado$=new x.x,this.listaEstado=[],this.listaEmpresa$=new x.x,this.listaEmpresa=[],this.seCargoProveedores=!1,this.seCargoSelect=!1,this.hayDatosTipoContacto=!1,this.listaTiposContacto=[],this.listaTiposContacto$=new x.x}editarListaTipoServicio(o){this.listaTipoServicio=o,this.listaTipoServicio$.next(this.listaTipoServicio)}editarListaEstado(o){this.listaEstado=o,this.listaEstado$.next(this.listaEstado)}editarListaEmpresa(o){this.listaEmpresa=o,this.listaEmpresa$.next(this.listaEmpresa)}obtenerListaTipoServicio(){return this.listaTipoServicio$.asObservable()}obtenerListaEstado(){return this.listaEstado$.asObservable()}obtenerListaEmpresa(){return this.listaEmpresa$.asObservable()}setCargoListaTipoServicios(o){this.listaTipoServicio=o}getCargoListaTipoServicios(){return this.listaTipoServicio}setCargoListaEstados(o){this.listaEstado=o}getCargoListaEstados(){return this.listaEstado}setCargoListaEmpresas(o){this.listaEmpresa=o}getCargoListaEmpresas(){return this.listaEmpresa}seCargoListaProveedores(){return this.seCargoProveedores}cargoListaProveedores(o){this.seCargoProveedores=o}seCargoSelects(){return this.seCargoSelect}cargoSelects(o){this.seCargoSelect=o}editarListaTiposContacto(o){this.listaTiposContacto=o,this.listaTiposContacto$.next(this.listaTiposContacto)}obtenerListaTiposContacto(){return this.listaTiposContacto$.asObservable()}getCargoListaTiposContacto(){return this.listaTiposContacto}setCargoListaTiposContacto(o){this.listaTiposContacto=o}seCargoTiposContacto(){return this.hayDatosTipoContacto}cargoTiposContacto(o){this.hayDatosTipoContacto=o}}return i.\u0275fac=function(o){return new(o||i)},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var at=_(366),h=_(433),M=_(4333);function dt(i,n){if(1&i&&(t.TgZ(0,"td",37),t._uU(1),t.qZA()),2&i){const o=t.oxw().$implicit;t.s9C("title",o.proveedores[0].clasificacion_pro.nombre_cla),t.xp6(1),t.hij(" ",o.proveedores[0].clasificacion_pro.nombre_cla," ")}}function lt(i,n){if(1&i&&(t.TgZ(0,"td",37),t._uU(1),t.qZA()),2&i){const o=t.oxw().$implicit;t.s9C("title",o.proveedores[0].categorias.nombre_cat),t.xp6(1),t.hij(" ",o.proveedores[0].categorias.nombre_cat," ")}}function ut(i,n){1&i&&(t.TgZ(0,"td",31),t._uU(1,"Aprobado"),t.qZA())}function ht(i,n){1&i&&(t.TgZ(0,"td",31),t._uU(1,"No aprobado"),t.qZA())}const B=function(i,n,o,e,s){return{"bg-danger":i,"bg-warning":n,"bg-secondary":o,"bg-info":e,"bg-success":s}};function pt(i,n){if(1&i){const o=t.EpF();t.TgZ(0,"tr",26)(1,"td",27),t._UZ(2,"input",24),t._uU(3),t.qZA(),t.TgZ(4,"td",28),t._uU(5),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.YNc(8,dt,2,2,"td",29),t.YNc(9,lt,2,2,"td",29),t.TgZ(10,"td",30)(11,"strong"),t._uU(12),t.qZA()(),t.TgZ(13,"td",31),t._uU(14),t.qZA(),t.YNc(15,ut,2,0,"td",32),t.YNc(16,ht,2,0,"td",32),t.TgZ(17,"td")(18,"label",33)(19,"strong"),t._uU(20),t.qZA()()(),t.TgZ(21,"td")(22,"a",34),t.NdJ("click",function(){const s=t.CHM(o),r=s.$implicit,c=s.index,a=t.oxw(2);return t.KtG(a.verFomulario(r.proveedores[0],c))}),t.TgZ(23,"span"),t._uU(24,"Formulario"),t.qZA()(),t._uU(25,"\xa0 "),t._uU(26,"\xa0 "),t.TgZ(27,"a",35),t.NdJ("click",function(){const s=t.CHM(o),r=s.$implicit,c=s.index,a=t.oxw(2);return t.KtG(a.borrar(r.proveedores[0].id,c))}),t._uU(28," \xa0\xa0"),t._UZ(29,"i",36),t._uU(30,"\xa0\xa0 "),t.qZA()()()}if(2&i){const o=n.$implicit;t.xp6(3),t.hij(" \xa0\xa0\xa0 ",o.proveedores[0].ruc_pro," "),t.xp6(2),t.Oqu(o.proveedores[0].nombre_pro),t.xp6(2),t.Oqu(o.proveedores[0].tipo_proveedor.nombre_tip),t.xp6(1),t.Q6J("ngIf",1==o.proveedores[0].fk_tipo_proveedor||2==o.proveedores[0].fk_tipo_proveedor),t.xp6(1),t.Q6J("ngIf",3==o.proveedores[0].fk_tipo_proveedor),t.xp6(1),t.s9C("title",o.proveedores[0].usuario_pro),t.xp6(2),t.Oqu(o.proveedores[0].usuario_pro),t.xp6(2),t.Oqu(o.fecha_vencimiento_pro),t.xp6(1),t.Q6J("ngIf",o.aprobado),t.xp6(1),t.Q6J("ngIf",!o.aprobado),t.xp6(2),t.Q6J("ngClass",t.qbA(12,B,"Por calificar"==o.estados.nombre_est,"Solicitado"==o.estados.nombre_est,"En revisi\xf3n"==o.estados.nombre_est,"Finalizado"==o.estados.nombre_est,"Eliminado"==o.estados.nombre_est)),t.xp6(2),t.Oqu(o.estados.nombre_est)}}const $=function(i){return{itemsPerPage:8,currentPage:i}};function mt(i,n){if(1&i&&(t.TgZ(0,"table",22)(1,"thead")(2,"tr")(3,"th",23),t._UZ(4,"input",24),t._uU(5," \xa0\xa0\xa0RUC "),t.qZA(),t.TgZ(6,"th",23),t._uU(7,"Proveedor"),t.qZA(),t.TgZ(8,"th",23),t._uU(9,"Tipo Proveedor"),t.qZA(),t.TgZ(10,"th",23),t._uU(11,"Servicio"),t.qZA(),t.TgZ(12,"th",23),t._uU(13,"Responsable"),t.qZA(),t.TgZ(14,"th",23),t._uU(15,"Fecha de vencimiento"),t.qZA(),t.TgZ(16,"th",23),t._uU(17,"Aprobado"),t.qZA(),t.TgZ(18,"th",23),t._uU(19,"Estado"),t.qZA(),t.TgZ(20,"th",23),t._uU(21,"Opciones"),t.qZA()()(),t.TgZ(22,"tbody"),t.YNc(23,pt,31,18,"tr",25),t.ALo(24,"paginate"),t.qZA()()),2&i){const o=t.oxw();t.xp6(23),t.Q6J("ngForOf",t.xi3(24,1,o.listaProveedores,t.VKq(4,$,o.page)))}}function _t(i,n){1&i&&(t.TgZ(0,"tbody")(1,"tr")(2,"p"),t._uU(3,"Sin proveedores"),t.qZA()()())}function ft(i,n){if(1&i&&(t.TgZ(0,"td",37),t._uU(1),t.qZA()),2&i){const o=t.oxw().$implicit;t.s9C("title",o.proveedores[0].clasificacion_pro.nombre_cla),t.xp6(1),t.hij(" ",o.proveedores[0].clasificacion_pro.nombre_cla," ")}}function gt(i,n){if(1&i&&(t.TgZ(0,"td",37),t._uU(1),t.qZA()),2&i){const o=t.oxw().$implicit;t.s9C("title",o.proveedores[0].categorias.nombre_cat),t.xp6(1),t.hij(" ",o.proveedores[0].categorias.nombre_cat," ")}}function bt(i,n){1&i&&(t.TgZ(0,"td",31),t._uU(1,"Aprobado"),t.qZA())}function vt(i,n){1&i&&(t.TgZ(0,"td",31),t._uU(1,"No aprobado"),t.qZA())}function Ct(i,n){if(1&i){const o=t.EpF();t.TgZ(0,"tr",26)(1,"td",27),t._UZ(2,"input",24),t._uU(3),t.qZA(),t.TgZ(4,"td",28),t._uU(5),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.YNc(8,ft,2,2,"td",29),t.YNc(9,gt,2,2,"td",29),t.TgZ(10,"td",30)(11,"strong"),t._uU(12),t.qZA()(),t.TgZ(13,"td",31),t._uU(14),t.qZA(),t.YNc(15,bt,2,0,"td",32),t.YNc(16,vt,2,0,"td",32),t.TgZ(17,"td")(18,"label",33)(19,"strong"),t._uU(20),t.qZA()()(),t.TgZ(21,"td")(22,"a",34),t.NdJ("click",function(){const s=t.CHM(o),r=s.$implicit,c=s.index,a=t.oxw(3);return t.KtG(a.verFomulario(r.proveedores[0],c))}),t.TgZ(23,"span"),t._uU(24,"Formulario"),t.qZA()(),t._uU(25,"\xa0 "),t._uU(26,"\xa0 "),t.TgZ(27,"a",35),t.NdJ("click",function(){const s=t.CHM(o),r=s.$implicit,c=s.index,a=t.oxw(3);return t.KtG(a.borrar(r.proveedores[0].id,c))}),t._uU(28," \xa0\xa0"),t._UZ(29,"i",36),t._uU(30,"\xa0\xa0 "),t.qZA()()()}if(2&i){const o=n.$implicit;t.xp6(3),t.hij(" \xa0\xa0\xa0 ",o.proveedores[0].ruc_pro," "),t.xp6(2),t.Oqu(o.proveedores[0].nombre_pro),t.xp6(2),t.Oqu(o.proveedores[0].tipo_proveedor.nombre_tip),t.xp6(1),t.Q6J("ngIf",1==o.proveedores[0].fk_tipo_proveedor||2==o.proveedores[0].fk_tipo_proveedor),t.xp6(1),t.Q6J("ngIf",3==o.proveedores[0].fk_tipo_proveedor),t.xp6(1),t.s9C("title",o.proveedores[0].usuario_pro),t.xp6(2),t.Oqu(o.proveedores[0].usuario_pro),t.xp6(2),t.Oqu(o.fecha_vencimiento_pro),t.xp6(1),t.Q6J("ngIf",o.aprobado),t.xp6(1),t.Q6J("ngIf",!o.aprobado),t.xp6(2),t.Q6J("ngClass",t.qbA(12,B,"Por calificar"==o.estados.nombre_est,"Solicitado"==o.estados.nombre_est,"En revisi\xf3n"==o.estados.nombre_est,"Finalizado"==o.estados.nombre_est,"Eliminado"==o.estados.nombre_est)),t.xp6(2),t.Oqu(o.estados.nombre_est)}}function At(i,n){if(1&i&&(t.TgZ(0,"tbody"),t.YNc(1,Ct,31,18,"tr",25),t.ALo(2,"paginate"),t.qZA()),2&i){const o=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",t.xi3(2,1,o.listaFiltradaProve,t.VKq(4,$,o.page)))}}function Zt(i,n){if(1&i&&(t.TgZ(0,"table",22)(1,"thead")(2,"tr")(3,"th",23),t._UZ(4,"input",24),t._uU(5," \xa0\xa0\xa0RUC "),t.qZA(),t.TgZ(6,"th",23),t._uU(7,"Proveedor"),t.qZA(),t.TgZ(8,"th",23),t._uU(9,"Tipo Proveedor"),t.qZA(),t.TgZ(10,"th",23),t._uU(11,"Servicio"),t.qZA(),t.TgZ(12,"th",23),t._uU(13,"Responsable"),t.qZA(),t.TgZ(14,"th",23),t._uU(15,"Fecha de vencimiento"),t.qZA(),t.TgZ(16,"th",23),t._uU(17,"Aprobado"),t.qZA(),t.TgZ(18,"th",23),t._uU(19,"Estado"),t.qZA(),t.TgZ(20,"th",23),t._uU(21,"Opciones"),t.qZA()()(),t.YNc(22,_t,4,0,"tbody",38),t.YNc(23,At,3,6,"tbody",38),t.qZA()),2&i){const o=t.oxw();t.xp6(22),t.Q6J("ngIf",0===o.listaFiltradaProve.length),t.xp6(1),t.Q6J("ngIf",o.listaFiltradaProve.length>0)}}function Tt(i,n){if(1&i){const o=t.EpF();t.TgZ(0,"pagination-controls",39),t.NdJ("pageChange",function(s){t.CHM(o);const r=t.oxw();return t.KtG(r.page=s)}),t.qZA()}}let kt=(()=>{class i{constructor(o,e,s,r,c,a,u,d,l,p){this.calificacionProveedorService=o,this.proveedorService=e,this.tipoContactoService=s,this.tipoServicioService=r,this.processSweetAlert=c,this.proveedoresCrud=a,this.empresaService=u,this.estadoService=d,this.cargarSelect=l,this.califProvCrud=p,this.object=new t.vpe,this.califi=new t.vpe,this.listaProveedores=[],this.listaFiltradaProve=[],this.bitacora=new ot.n,this.tipoFiltrado=1,this.filtePost=""}ngOnInit(){this.consultaListaProveedores()}consultaListaProveedores(){this.cargarSelect.seCargoSelects()?(this.listaProveedores=this.califProvCrud.getCargoListaCalificacionesProveedor(),this.cargarCalificacionProveedor()):this.calificacionProveedorService.list().subscribe(o=>{this.tipoContactoService.listTipoContacto().subscribe(e=>{this.tipoServicioService.listTipoServicio().subscribe(s=>{this.estadoService.listEstado().subscribe(r=>{this.empresaService.listEmpresas().subscribe(c=>{const a=e.data,u=s.data,l=c.data;this.cargarSelect.setCargoListaEstados(r.data),this.cargarSelect.setCargoListaEmpresas(l),this.cargarSelect.setCargoListaTipoServicios(u),this.cargarSelect.setCargoListaTiposContacto(a),this.cargarSelect.cargoSelects(!0),o.data.forEach((f,E)=>{"[]"!==JSON.stringify(f.proveedores)&&(this.listaProveedores[E]=f)}),o.data.forEach((f,E)=>{this.listaProveedores[E].aprobado="0"!==f.aprobado}),this.califProvCrud.setCargoListaCalificacionesProveedor(this.listaProveedores),this.cargarCalificacionProveedor()})})})})})}cargarCalificacionProveedor(){let o=new C.I;const e=this.cargarSelect.getCargoListaTipoServicios(),s=this.cargarSelect.getCargoListaEstados();this.listaProveedores.forEach(r=>{let c=r.proveedores[0];switch(r.proveedores[0]=o,r.proveedores[0]=c,void 0===JSON.stringify(r.proveedores[0].tipo_proveedor)&&(r.proveedores[0].tipo_proveedor=new et.O),Number(r.proveedores[0].fk_tipo_proveedor)){case 1:r.proveedores[0].tipo_proveedor.nombre_tip="General";break;case 2:r.proveedores[0].tipo_proveedor.nombre_tip="Transporte";break;case 3:r.proveedores[0].tipo_proveedor.nombre_tip="Agente de carga"}const a=e.find(d=>d.id===Number(r.proveedores[0].fk_tipo_servicio)),u=s.find(d=>d.id===Number(r.proveedores[0].fk_estado));r.proveedores[0].tipo_servicio=a,r.proveedores[0].estados=u})}nuevoProveedor(){const o=new C.I;this.object.emit(o)}filtrarPorEmpresa(o){const e=o.target.value;""===e?this.listaFiltradaProve=this.listaProveedores:46==(e.keyCode||e.charCode||e.which)||8==(e.keyCode||e.charCode||e.which)?this.listaFiltradaProve=this.listaProveedores.filter(s=>s.proveedores[0].ruc_pro.toLowerCase().includes(e.toLowerCase())):((this.esNumerico(e)||this.esAlfanumerico(e))&&(this.listaFiltradaProve=this.listaProveedores.filter(s=>s.proveedores[0].ruc_pro.toLowerCase().includes(e.toLowerCase()))),this.esString(e)&&(this.listaFiltradaProve=this.listaProveedores.filter(s=>s.proveedores[0].nombre_pro.toLowerCase().includes(e.toLowerCase()))))}esNumerico(o){return/^-?\d+$/.test(o)}esEspacio(o){return!(!/\s/g.test(o)||this.esNumerico(o)||this.esString(o))}esAlfanumerico(o){return!(!/^[-_ a-zA-Z0-9-]+$/.test(o)||this.esNumerico(o)||this.esString(o))}esString(o){return!!/^[a-zA-Z]+$/.test(o)}cambioFiltrado(o){const e=o.target.value;""===e?this.listaFiltradaProve=this.listaProveedores:(46==(e.keyCode||e.charCode||e.which)||8==(e.keyCode||e.charCode||e.which)||this.esString(e)||this.esEspacio(e))&&(this.listaFiltradaProve=this.listaProveedores.filter(s=>s.estados.nombre_est.toLowerCase().includes(e.toLowerCase())))}editar(){}borrar(o,e){this.processSweetAlert.alertMessageEleccionOpcion("\xbfDesea borrar este registro?","Si borra este registro no se mostrara en este listado","Confirmar","Cancelar").then(s=>{s&&this.proveedorService.borrarProveedor(o).subscribe(r=>{this.listaProveedores.splice(e,1)})})}verFomulario(o,e){o.index=e,this.object.emit(o),this.califi.emit(this.listaProveedores[e]),console.log("enviar datos",this.califi)}}return i.\u0275fac=function(o){return new(o||i)(t.Y36(J),t.Y36(it.z),t.Y36(st.u),t.Y36(rt.z),t.Y36(S.J),t.Y36(z.p),t.Y36(nt.P),t.Y36(ct.s),t.Y36(y),t.Y36(at.A))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-list"]],outputs:{object:"object",califi:"califi"},decls:38,vars:3,consts:[[1,"container","my-2"],[1,"row","px-3","py-2","align-items-center","table-success"],["align","left",1,"col-6","px-1"],[1,"h6","font-weight-bold","mb-0"],[1,"h6","font-weight-bold","mb-0","color-azul"],[1,"col-md-4"],[1,"input-group","mb-3"],["type","text",1,"form-control","form-control-lg",3,"keyup"],["type","submit",1,"input-group-text"],[1,"bi","bi-search"],["id","listamodelos"],["value","Solicitado"],["value","En revisi\xf3n"],["value","Finalizado"],["value","Por calificar"],["role","group","aria-label","First group",1,"btn-group","mb-3"],["type","text","list","listamodelos","placeholder","Buscar por Estado",1,"form-control",3,"keyup"],["align","right",1,"col-md-4"],["type","button",1,"btn","btn-secondary-outline"],["width","32","height","32",1,"bi","bi-download"],["class","table table-condensed",4,"ngIf"],["class","my-pagination","previousLabel","Anterior","nextLabel","Siguiente",3,"pageChange",4,"ngIf"],[1,"table","table-condensed"],["scope","col"],["type","checkbox","id","exampleCheck1",1,"form-check-input"],["class","align-middle",4,"ngFor","ngForOf"],[1,"align-middle"],["scope","row",1,"whitespace-nowrap","menos-lenght-texto-ruc"],[1,"whitespace-nowrap","menos-lenght-texto-nombre"],["class","whitespace-nowrap menos-lenght-texto-ruc",3,"title",4,"ngIf"],[1,"menos-lenght-texto-ruc",3,"title"],[1,"whitespace-nowrap"],["class","whitespace-nowrap",4,"ngIf"],[1,"custom-css","btn","text-white","nuevo-color",3,"ngClass"],["type","button",1,"custom-css","btn","btn-primary","text-dark",3,"click"],["type","button",1,"custom-css","btn","btn-primary","nuevo-color",3,"click"],[1,"bi","bi-trash3"],[1,"whitespace-nowrap","menos-lenght-texto-ruc",3,"title"],[4,"ngIf"],["previousLabel","Anterior","nextLabel","Siguiente",1,"my-pagination",3,"pageChange"]],template:function(o,e){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"label",3)(4,"h3"),t._uU(5,"Administraci\xf3n de calificaciones"),t.qZA()(),t._UZ(6,"br"),t.TgZ(7,"label",4)(8,"h4"),t._uU(9,"TORRES & TORRES"),t.qZA()()()(),t.TgZ(10,"div",1),t._UZ(11,"br")(12,"br")(13,"br"),t.TgZ(14,"div",5)(15,"div",6)(16,"input",7),t.NdJ("keyup",function(r){return e.filtrarPorEmpresa(r)}),t.qZA(),t.TgZ(17,"button",8),t._UZ(18,"i",9),t.qZA()()(),t.TgZ(19,"datalist",10),t._UZ(20,"option",11)(21,"option",12)(22,"option",13)(23,"option",14),t.qZA(),t.TgZ(24,"div",5),t._uU(25," \xa0\xa0 "),t.TgZ(26,"div",15)(27,"input",16),t.NdJ("keyup",function(r){return e.cambioFiltrado(r)}),t.qZA()()(),t.TgZ(28,"div",17),t._uU(29," \xa0\xa0 "),t.TgZ(30,"div",15)(31,"button",18),t._UZ(32,"i",19),t.qZA()()(),t._UZ(33,"br")(34,"br"),t.YNc(35,mt,25,6,"table",20),t.YNc(36,Zt,24,2,"table",20),t.YNc(37,Tt,1,0,"pagination-controls",21),t.qZA()()),2&o&&(t.xp6(35),t.Q6J("ngIf",0==e.listaFiltradaProve.length),t.xp6(1),t.Q6J("ngIf",e.listaFiltradaProve.length>0),t.xp6(1),t.Q6J("ngIf",e.listaProveedores.length>8))},dependencies:[v.mk,v.sg,v.O5,h.YN,h.Kr,M.LS,M._s],styles:[".table-condensed[_ngcontent-%COMP%], label[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%], a[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px}button.selected-custom[_ngcontent-%COMP%]{border-bottom:3px solid rgb(103,159,220);text-align:center}td.menos-lenght-texto-ruc[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:135px}td.menos-lenght-texto-nombre[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:110px}"]}),i})();var xt=_(5226),wt=_.n(xt),D=_(2107);class k{constructor(){this.index=0,this.id=0,this.id_doc=0,this.dias_solicitud_cal=0,this.cargado_doc=0,this.path_doc="",this.fk_lista_doc=0,this.fk_estado=0,this.fk_proveedor=0,this.fk_contacto=0,this.fk_contacto_financiero=0,this.fk_conductor=0,this.fk_vehiculo=0,this.estados=new P.G,this.lista_documentos=[]}}class U{constructor(){this.index=0,this.id=0}}class Dt{constructor(){this.index=0,this.check=!1}}var O=_(9085),H=_(9959),Ut=_(8598);let I=(()=>{class i{constructor(o,e){this.http=o,this.router=e,this.baseUrl=A.N.urlGlobal+"documentos",this.url=`${this.baseUrl}`,this.httpOptions={headers:new g.WM({"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer "+localStorage.getItem("token")})}}documentoProveedorGeneral(o,e){return this.http.post(this.url+"/estado/proveedores/"+o,e).pipe((0,b.X)(1))}documentoProveedorVehiculo(o,e){return this.http.post(this.url+"/estado/vehiculos/"+o,e).pipe((0,b.X)(1))}documentoProveedorConductor(o,e){return this.http.post(this.url+"/estado/conductores/"+o,e).pipe((0,b.X)(1))}}return i.\u0275fac=function(o){return new(o||i)(t.LFG(g.eN),t.LFG(T.F0))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),G=(()=>{class i{constructor(o,e){this.http=o,this.router=e,this.baseUrl=A.N.urlGlobal+"send-email",this.url=`${this.baseUrl}`,this.httpOptions={headers:new g.WM({"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer "+localStorage.getItem("token")})}}sendEmailProveedor(o,e){return this.http.post(this.url+"-proveedor/"+o,e).pipe((0,b.X)(1))}sendEmailVehiculo(o,e){return this.http.post(this.url+"-vehiculo/"+o,e).pipe((0,b.X)(1))}sendEmailConductor(o,e){return this.http.post(this.url+"-conductor/"+o,e).pipe((0,b.X)(1))}}return i.\u0275fac=function(o){return new(o||i)(t.LFG(g.eN),t.LFG(T.F0))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Et=(()=>{class i{constructor(o,e){this.http=o,this.router=e,this.baseUrl=A.N.urlGlobal+"documentos-calificacion-proveedor",this.url=`${this.baseUrl}`,this.httpOptions={headers:new g.WM({"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer "+localStorage.getItem("token")})}}listDocsProv(o){return this.http.get(this.url+"/"+o,this.httpOptions).pipe((0,b.X)(1))}}return i.\u0275fac=function(o){return new(o||i)(t.LFG(g.eN),t.LFG(T.F0))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Pt=(()=>{class i{constructor(){this.hayContactosProveedor=!1,this.listaContactosProveedor$=new x.x,this.listaContactosProveedor=[]}editarListaContactosProveedor(o){this.listaContactosProveedor=o,this.listaContactosProveedor$.next(this.listaContactosProveedor)}obtenerListaContactosProveedor(){return this.listaContactosProveedor$.asObservable()}getCargoListaContactosProveedor(){return this.listaContactosProveedor}setCargoListaContactosProveedor(o){this.listaContactosProveedor=o}seCargoContactosProveedor(){return this.hayContactosProveedor}cargoContactosProveedor(o){this.hayContactosProveedor=o}}return i.\u0275fac=function(o){return new(o||i)},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),St=(()=>{class i{constructor(){this.hayDatosContactoFinaciero=!1,this.listaContactosFinancieroProveedor=[],this.listaContactosFinancieroProveedor$=new x.x}editarListaContactosFinancieroProveedor(o){this.listaContactosFinancieroProveedor=o,this.listaContactosFinancieroProveedor$.next(this.listaContactosFinancieroProveedor)}obtenerListaContactosFinancieroProveedor(){return this.listaContactosFinancieroProveedor$.asObservable()}getCargoListaContactosFinancieroProveedor(){return this.listaContactosFinancieroProveedor}setCargoListaContactosFinancieroProveedor(o){this.listaContactosFinancieroProveedor=o}seCargoContactosFinancieroProveedor(){return this.hayDatosContactoFinaciero}cargoContactosFinancieroProveedor(o){this.hayDatosContactoFinaciero=o}}return i.\u0275fac=function(o){return new(o||i)},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),K=(()=>{class i{constructor(){this.hayVehiculos=!1,this.listaVehiculos$=new x.x,this.listaVehiculos=[]}editarListaVehiculo(o){this.listaVehiculos=o,this.listaVehiculos$.next(this.listaVehiculos)}obtenerListaVehiculo(){return this.listaVehiculos$.asObservable()}getCargoListaVehiculo(){return this.listaVehiculos}setCargoListaVehiculo(o){this.listaVehiculos=o}seCargoVehiculo(){return this.hayVehiculos}cargoVehiculo(o){this.hayVehiculos=o}}return i.\u0275fac=function(o){return new(o||i)},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),R=(()=>{class i{constructor(){this.hayConductores=!1,this.listaConductores$=new x.x,this.listaConductores=[]}editarListaConductor(o){this.listaConductores=o,this.listaConductores$.next(this.listaConductores)}obtenerListaConductor(){return this.listaConductores$.asObservable()}getCargoListaConductor(){return this.listaConductores}setCargoListaConductor(o){this.listaConductores=o}seCargoConductor(){return this.hayConductores}cargoConductor(o){this.hayConductores=o}}return i.\u0275fac=function(o){return new(o||i)},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var Z=_(8997);const yt=["closeModal"],Lt=["closeCanvas"],qt=["closeAddExpenseModal"];function Ft(i,n){if(1&i){const o=t.EpF();t.TgZ(0,"div")(1,"div",62)(2,"div",63)(3,"input",64),t.NdJ("click",function(){const r=t.CHM(o).index,c=t.oxw();return t.KtG(c.vistear(r))}),t.qZA(),t._uU(4),t.qZA(),t.TgZ(5,"div",21)(6,"span",65),t._uU(7," \xa0"),t._UZ(8,"i",66),t._uU(9,"\xa0 "),t.qZA(),t._uU(10),t.qZA(),t.TgZ(11,"div",22)(12,"div",62)(13,"div",67)(14,"button",68),t.NdJ("click",function(){const r=t.CHM(o).$implicit,c=t.oxw();return t.KtG(c.subirDoc(r.id,r))}),t._uU(15," \xa0\xa0"),t._UZ(16,"i",69),t._uU(17," Cargar\xa0\xa0 "),t.qZA()(),t.TgZ(18,"div",67)(19,"button",70),t.NdJ("click",function(){const r=t.CHM(o).$implicit,c=t.oxw();return t.KtG(c.mostrarItem(r))}),t._uU(20," \xa0\xa0"),t._UZ(21,"i",71),t._uU(22," Ver\xa0\xa0 "),t.qZA()()()()(),t._UZ(23,"hr"),t.qZA()}if(2&i){const o=n.index,e=t.oxw();t.xp6(2),t.s9C("title",e.listaDocumentos[o].nombre_lis_doc),t.xp6(1),t.Q6J("checked",e.visteadas[o]),t.xp6(1),t.hij(" \xa0\xa0\xa0",e.listaDocumentos[o].nombre_lis_doc," "),t.xp6(6),t.hij("\xa0\xa0\xa0\xa0",e.listaDocumentos[o].estados.nombre_est," ")}}function Nt(i,n){if(1&i&&(t.TgZ(0,"option",77),t._uU(1),t.qZA()),2&i){const o=n.$implicit;t.Q6J("value",o.id),t.xp6(1),t.hij(" ",o.nombre_lis_doc," ")}}function Jt(i,n){1&i&&(t.TgZ(0,"p",78),t._uU(1," Seleccionar tipo de documento. "),t.qZA())}function Mt(i,n){if(1&i){const o=t.EpF();t.TgZ(0,"form",72)(1,"div",40)(2,"div",35)(3,"label",73),t._uU(4,"Tipo de documento"),t.qZA(),t.TgZ(5,"select",74),t.NdJ("ngModelChange",function(s){t.CHM(o);const r=t.oxw();return t.KtG(r.document.fk_lista_doc=s)}),t.YNc(6,Nt,2,2,"option",75),t.qZA(),t.YNc(7,Jt,2,0,"p",76),t.qZA()()()}if(2&i){const o=t.oxw();t.Q6J("formGroup",o.form),t.xp6(5),t.s9C("title",o.document.nombre_doc),t.Q6J("ngModel",o.document.fk_lista_doc),t.uIk("disabled",!0),t.xp6(1),t.Q6J("ngForOf",o.listaDocumentos),t.xp6(1),t.Q6J("ngIf",o.submitted&&0==o.document.fk_lista_doc||o.submitted&&(null==o.f.fld.errors?null:o.f.fld.errors.required))}}function Ot(i,n){if(1&i){const o=t.EpF();t.TgZ(0,"div",79)(1,"div",80)(2,"ul",81)(3,"li",82)(4,"h4"),t._uU(5),t.qZA()(),t.TgZ(6,"li",83)(7,"button",84),t.NdJ("click",function(){t.CHM(o);const s=t.oxw();return t.KtG(s.borrarDoc())}),t.TgZ(8,"h5"),t._uU(9,"Borrar documento"),t.qZA()()()()()()}if(2&i){const o=t.oxw();t.xp6(5),t.Oqu(o.document.nombre_doc)}}function It(i,n){if(1&i){const o=t.EpF();t.TgZ(0,"ngx-dropzone-preview",88),t.NdJ("removed",function(){const r=t.CHM(o).$implicit,c=t.oxw(2);return t.KtG(c.onRemove(r))}),t.TgZ(1,"ngx-dropzone-label"),t._uU(2),t.qZA()()}if(2&i){const o=n.$implicit;t.Q6J("removable",!0),t.xp6(2),t.AsE("",o.name," (",o.type,")")}}function Gt(i,n){1&i&&(t.TgZ(0,"p",78),t._uU(1," Subir el archivo. "),t.qZA())}function jt(i,n){if(1&i){const o=t.EpF();t.TgZ(0,"div",85)(1,"h6"),t._uU(2,"Sube el archivo"),t.qZA(),t.TgZ(3,"p"),t._uU(4,"Puedes subir un archivo PDF,JPG, PNG de hasta 100 MB."),t.qZA(),t.TgZ(5,"ngx-dropzone",86),t.NdJ("change",function(s){t.CHM(o);const r=t.oxw();return t.KtG(r.onSelect(s))}),t.TgZ(6,"ngx-dropzone-label"),t._uU(7,"Arrastra y suelta un archivo para subirlo O elige archivos de tu dispositivo"),t.qZA(),t.YNc(8,It,3,3,"ngx-dropzone-preview",87),t.qZA(),t.YNc(9,Gt,2,0,"p",76),t.qZA()}if(2&i){const o=t.oxw();t.xp6(5),t.Q6J("multiple",!1),t.xp6(3),t.Q6J("ngForOf",o.files),t.xp6(1),t.Q6J("ngIf",o.submitted&&0==o.files.length)}}function Yt(i,n){if(1&i){const o=t.EpF();t.TgZ(0,"div",40)(1,"button",89),t.NdJ("click",function(){t.CHM(o);const s=t.oxw();return t.KtG(s.guardar())}),t._uU(2," \xa0\xa0\xa0\xa0\xa0\xa0"),t.TgZ(3,"strong",44),t._uU(4,"Guardar"),t.qZA(),t._uU(5,"\xa0\xa0\xa0\xa0\xa0\xa0 "),t.qZA()()}}function Vt(i,n){1&i&&(t.TgZ(0,"label",90),t._uU(1,"Si"),t.qZA())}function Qt(i,n){1&i&&(t.TgZ(0,"label",91),t._uU(1,"No"),t.qZA())}let zt=(()=>{class i{constructor(o,e,s,r,c,a,u,d,l,p,m,f,E,Go,jo,Yo,Vo){this.processSweetAlert=o,this.calificacionProveedorService=e,this.documentService=s,this.docCreacionProveedorService=r,this.conductorService=c,this.estadoDocumentService=a,this.sendEmailProveedor=u,this.formBuilder=d,this.cargarSelect=l,this.cargarSelectoresListaDocumentos=p,this.listaDocumentosService=m,this.proveedoresCrud=f,this.documentCalifProvService=E,this.contactosProv=Go,this.conFinanProv=jo,this.vehiculoCrud=Yo,this.conductorCrud=Vo,this.filterPost="",this.seleccion=0,this.files=[],this.visteadas=[],this.seVistearonTodos=!1,this.formData=new FormData,this.form=new h.nJ({}),this.document=new D.B,this.pdfSrc="",this.objectEdit=new C.I,this.califEdit=new F,this.contactosFinancieroProveedor=[],this.listaDocumentos=[],this.documentosCalificacionProveedor=[],this.docsCalifProv=[],this.tipoDocumentoTab=1,this.contactoProveedor=[],this.contactoFinancieroProveedor=[],this.calificacionArray=[],this.submitted=!1,this.prioridad=!1}ngOnInit(){this.initFormProGen(),this.cargarDocumentosCalificacionesProveedor(),this.cargarTodosLosDocs(),this.iniciarCalificacionAlProveedor(),this.prioridad=this.califEdit.aprobado}iniciarCalificacionAlProveedor(){for(let o=0;o<5;o++)this.calificacionArray[o]=new Dt,this.calificacionArray[o].index=o,this.calificacionArray[o].check=!1}initFormProGen(){this.form=this.formBuilder.group({fld:[this.document.fk_lista_doc,[h.kI.required]]})}get f(){return this.form.controls}cargarTodosLosDocs(){this.cargarSelectoresListaDocumentos.seCargoListaDocumento()||this.docCreacionProveedorService.listDocs().subscribe(o=>{const e=o.data;this.cargarSelectoresListaDocumentos.setCargoListaDocumento(e),this.cargarSelectoresListaDocumentos.cargoListaDocumento(!0),e.forEach((s,r)=>{this.visteadas[r]=!1})})}borrar(o,e){const s=this.documentosCalificacionProveedor.find(r=>r.lista_documentos[0].id===o);void 0===JSON.stringify(s)?this.processSweetAlert.alertMensajeError("Error","El documento no se encuentra registrado."):this.processSweetAlert.alertMessageEleccionOpcion("\xbfDesea borrar este registro?","Si borra este registro no se mostrara en este listado","Confirmar","Cancelar").then(r=>{if(r){const c=this.cargarSelect.getCargoListaEstados();this.documentService.borrarDocumento(o).subscribe(()=>{this.listaDocumentos[e].estados=c.find(a=>8===a.id)})}})}cargarDocumentosCalificacionesProveedor(){this.listaDocumentos=[],this.documentCalifProvService.listDocsProv(Number(this.objectEdit.id)).subscribe(o=>{const e=o.data;let r=[];r=Object.values(e.doc_no_cargados),e.Proveedor.forEach((a,u)=>{this.docsCalifProv[u]=new k,this.listaDocumentos[u]=a.lista_documentos[0],this.listaDocumentos[u].estados=new P.G,this.listaDocumentos[u].estados=a.estados,this.docsCalifProv[u].fk_lista_doc=Number(a.fk_lista_doc),this.docsCalifProv[u].fk_proveedor=Number(a.fk_proveedor),this.docsCalifProv[u].path_doc=a.path_doc}),r.forEach(a=>{a.estados=this.cargarSelect.getCargoListaEstados().find(u=>"Pendiente"===u.nombre_est),this.listaDocumentos.push(a)}),this.listaDocumentos.forEach((a,u)=>{this.visteadas[u]=!1})})}mostrarListaDocumentos(){const o=this.cargarSelect.getCargoListaEstados();this.listaDocumentos.forEach((e,s)=>{this.visteadas[s]=!1;const r=this.documentosCalificacionProveedor.find(c=>Number(c.lista_documentos[0].id)===Number(e.id));void 0===JSON.stringify(r)?(e.estados=o.find(c=>"Pendiente"===c.nombre_est),e.estados.id=Number(e.estados.id)):(e.estados=o.find(c=>c.id===r?.fk_estado),e.estados.id=Number(e.estados.id))})}vistear(o){this.visteadas[o]=!this.visteadas[o]}subirDoc(o,e){this.files=[];const r=this.objectEdit.documentoscali.find(a=>a.lista_documentos[0].id===o),c=this.docsCalifProv.find(a=>a.fk_lista_doc===e.id);if(void 0===JSON.stringify(r)){this.document=new D.B;const a=this.listaDocumentos.find(u=>u.id==o);this.document.borrado=!1,this.document.fk_lista_doc=a?.id,this.document.nombre_doc=a?.nombre_lis_doc,this.document.estados=this.cargarSelect.getCargoListaEstados().find(u=>"Pendiente"===u.nombre_est)}else this.document.fk_lista_doc=r?.fk_lista_doc,this.document.type=r?.path_doc.split(/[#?]/)[0].split(".").pop().trim(),this.document.borrado=!0,this.document.id=r?.id,this.document.nombre_doc=r?.lista_documentos[0].nombre_lis_doc,this.document.estados=e.estados,this.document.path_doc=c?.path_doc}onRemove(o){this.files.splice(this.files.indexOf(o),1)}onSelect(o){this.files=[],this.files.push(...o.addedFiles),this.formData=new FormData;const e=new FileReader;e.readAsArrayBuffer(this.files[0]),e.onload=s=>{var r=new Blob([this.files[0]],{type:"application/pdf"});this.formData.set("file",r,this.files[0].name),this.document.formData=this.formData}}borrarDoc(){this.document.borrado=!this.document.borrado}operacionSelector(){switch(Number(this.seleccion)){case 1:let e=[];this.visteadas.forEach((l,p)=>{if(l){let m=new U;m.id=this.listaDocumentos[p].id,e.push(m),this.vistear(p)}});const s={list_documento:e};this.sendEmailProveedor.sendEmailProveedor(Number(this.objectEdit.id),s).subscribe(()=>{this.refresh()});break;case 2:const r=this.cargarSelect.getCargoListaEstados().find(l=>"Pendiente"===l.nombre_est).nombre_est;let c=[],a=[];this.visteadas.forEach((l,p)=>{if(l)if(r!==this.listaDocumentos[p].estados.nombre_est){let m=new U;m.id=this.listaDocumentos[p].id,a.push(m),this.vistear(p)}else c.push(this.listaDocumentos[p].id)});const u={list_documento:a};this.cargarSelect.getCargoListaEstados().find(l=>"Finalizado"===l.nombre_est),this.estadoDocumentService.documentoProveedorGeneral(Number(this.objectEdit.id),u).subscribe(()=>{this.refresh(),c.length>0&&setTimeout(()=>{},3550)})}}mostrarItem(o){const e=this.docsCalifProv.find(s=>s.fk_lista_doc===o.id);if(void 0===JSON.stringify(e))setTimeout(()=>{this.closeModal.nativeElement.click()},200),this.processSweetAlert.alertMensajeError("Error","El documento no se encuentra registrado.");else if(null==e.path_doc)this.processSweetAlert.alertMensajeError("Error","ERROR");else{this.pdfSrc=e.path_doc;let s=`<div class="modal-body"><iframe src=${this.pdfSrc} frameBorder="0" scrolling="auto" width="100%" height="580px" id="content_all" frameborder="0"></iframe></div>`;wt().fire({title:s,width:"1500px",showCloseButton:!0,cancelButtonAriaLabel:"Thumbs down"})}}guardar(){this.submitted=!0,!this.form.invalid&&0!==this.files.length&&0!==this.document.fk_lista_doc&&(this.formData.set("fk_proveedor",""+this.objectEdit.id),this.formData.set("fk_lista_doc",""+this.document.fk_lista_doc),this.formData.set("nombre_doc",""+this.document.nombre_doc),this.document.formData=this.formData,this.documentService.crearDocumento(this.document,1).subscribe(o=>{const e=o.data;new k,this.document.id=Number(e.id),this.document.path_doc=e.url;const r=this.listaDocumentos.findIndex(c=>c.id===this.document.fk_lista_doc);this.listaDocumentos[r].estados=this.cargarSelect.getCargoListaEstados().find(c=>"Guardado"===c.nombre_est),this.refresh(),this.closeCanvas.nativeElement.click()}))}cargarDocsSubidos(){this.cargarDocumentosCalificacionesProveedor()}refresh(){this.cargarDocsSubidos()}checkearTodos(){let o=[];if(this.seVistearonTodos)for(let e=0;e<this.visteadas.length;e++)this.visteadas[e]=!1,o.push(this.visteadas[e]);else for(let e=0;e<this.visteadas.length;e++)this.visteadas[e]=!0,o.push(this.visteadas[e]);this.visteadas=o}descargarItem(o){console.log("Item: "+JSON.stringify(o))}guardarCalificacion(){let o=0;o=this.prioridad?1:0;const e={aprobado:o};this.calificacionProveedorService.calificarProveedor(Number(this.objectEdit.id),e).subscribe(()=>{})}}return i.\u0275fac=function(o){return new(o||i)(t.Y36(S.J),t.Y36(J),t.Y36(O.Z),t.Y36(H.F),t.Y36(Ut.z),t.Y36(I),t.Y36(G),t.Y36(h.QS),t.Y36(y),t.Y36(N.t),t.Y36(Q),t.Y36(z.p),t.Y36(Et),t.Y36(Pt),t.Y36(St),t.Y36(K),t.Y36(R))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-general"]],viewQuery:function(o,e){if(1&o&&(t.Gf(yt,5),t.Gf(Lt,5),t.Gf(qt,5)),2&o){let s;t.iGM(s=t.CRH())&&(e.closeModal=s.first),t.iGM(s=t.CRH())&&(e.closeCanvas=s.first),t.iGM(s=t.CRH())&&(e.closeAddExpenseModal=s.first)}},inputs:{document:"document",objectEdit:"objectEdit",califEdit:"califEdit"},decls:106,vars:10,consts:[[1,"d-flex","flex-row"],["align","left",1,"col-md-4"],["align","left",1,"col-md-2"],["aria-label","Default select example",1,"form-select",3,"ngModel","ngModelChange"],["selected","","value","0"],["value","1"],["value","2"],["align","left",1,"col-md-3"],["type","button",1,"btn","btn-primary","custom-redondo",3,"click"],[1,"bi","bi-send"],["type","button","data-bs-toggle","modal","data-bs-target","#exampleModal3",1,"btn","btn-primary","custom-redondo"],[1,"bi","bi-star-fill"],["align","right",1,"col-md-3"],["type","button",1,"btn","btn-transparent",3,"click"],[1,"bi","bi-arrow-clockwise"],[1,"background-color"],[1,"border-0","sin-borde"],[1,"pl-thead"],[1,"row"],[1,"col-6"],["type","checkbox","id","exampleCheck1",1,"form-check-input",3,"ngModel","ngModelChange","click"],[1,"col-2"],[1,"col-4"],[1,"col-lg-12","col-md-11"],[1,"pl-table"],[1,"pl-tbody"],[4,"ngFor","ngForOf"],["data-bs-backdrop","static","tabindex","-1","id","staticBackdrop","aria-labelledby","staticBackdropLabel",1,"offcanvas","offcanvas-end"],[1,"offcanvas-header"],["id","staticBackdropLabel",1,"offcanvas-title"],["type","button","data-bs-dismiss","offcanvas","aria-label","Close",1,"btn-close"],["closeCanvas",""],[1,"offcanvas-body"],[1,"d-grid","gap-3"],[3,"formGroup",4,"ngIf"],[1,"form-group"],["class","container","align","center",4,"ngIf"],["class","container",4,"ngIf"],[1,"offcanvas-footer"],[1,"d-flex","flex-row","justify-content-center"],[1,"p-2"],["class","p-2",4,"ngIf"],[1,"p-1"],["type","button","data-bs-dismiss","offcanvas","aria-label","Close",1,"btn","btn-outline-primary","btn-lg","btn-block","radio-del-boton"],[1,"tamano-texto-boton"],["id","exampleModal3","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered","modal-lg"],[1,"modal-content","custom"],[1,"modal-header","border-0"],["id","exampleModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"form-group","row","align-items-center"],["for","staticEmail",1,"col-sm-4","col-form-label"],[1,"col-sm-8"],[1,"form-check","form-switch"],["id","flexSwitchCheckDefault","type","checkbox",1,"form-check-input",3,"ngModel","ngModelChange"],["class","form-check-label","for","flexSwitchCheckDefault",4,"ngIf"],["class","form-check-label","for","flexSwitchCheckChecked",4,"ngIf"],[1,"d-flex","justify-content-center"],["type","button","data-bs-dismiss","modal",1,"btn","btn-outline-primary","custom",3,"click"],[1,"modal-footer","border-0"],[1,"row","align-items-center"],[1,"col-6","text-truncate","menos-lenght-texto",3,"title"],["type","checkbox","id","exampleCheck1",1,"form-check-input",3,"checked","click"],[1,"bg-warning","rounded-circle"],[1,"bi","bi-caret-up-fill"],[1,"col-md-auto"],["data-bs-toggle","offcanvas","data-bs-target","#staticBackdrop",1,"boton-custom","cargar",3,"click"],[1,"bi","bi-file-arrow-up"],["data-bs-toggle","modal","data-bs-target","#exampleModal",1,"boton-custom","ver",3,"click"],[1,"bi","bi-eye"],[3,"formGroup"],["for","inputsm",1,"tamano-texto"],["aria-label","Default select example","formControlName","fld",1,"form-select",3,"title","ngModel","ngModelChange"],["option","",3,"value",4,"ngFor","ngForOf"],["class","text-danger",4,"ngIf"],["option","",3,"value"],[1,"text-danger"],["align","center",1,"container"],[1,"card",2,"width","18rem"],[1,"list-group","list-group-flush"],[1,"list-group-item"],[1,"list-group-item","text-center"],["type","button","id","toright",1,"btn","btn-theme","pull-right",3,"click"],[1,"container"],["accept","application/pdf,image/jpeg,image/jpg,image/png",3,"multiple","change"],[3,"removable","removed",4,"ngFor","ngForOf"],[3,"removable","removed"],["type","button",1,"btn","btn-primary","btn-lg","btn-block","radio-del-boton",3,"click"],["for","flexSwitchCheckDefault",1,"form-check-label"],["for","flexSwitchCheckChecked",1,"form-check-label"]],template:function(o,e){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h5"),t._uU(3,"Formularios de calificaci\xf3n"),t.qZA()(),t.TgZ(4,"div",2)(5,"select",3),t.NdJ("ngModelChange",function(r){return e.seleccion=r}),t.TgZ(6,"option",4)(7,"strong"),t._uU(8,"Seleccionar"),t.qZA()(),t.TgZ(9,"option",5),t._uU(10,"Enviar multiple"),t.qZA(),t.TgZ(11,"option",6),t._uU(12,"Aprobar"),t.qZA()()(),t.TgZ(13,"div",7),t._uU(14," \xa0\xa0\xa0\xa0 "),t.TgZ(15,"button",8),t.NdJ("click",function(){return e.operacionSelector()}),t._UZ(16,"i",9),t._uU(17," Ok "),t.qZA(),t._uU(18," \xa0\xa0\xa0\xa0 "),t.TgZ(19,"button",10),t._UZ(20,"i",11),t._uU(21," Calificar "),t.qZA()(),t.TgZ(22,"div",12)(23,"button",13),t.NdJ("click",function(){return e.refresh()}),t._UZ(24,"i",14),t._uU(25," Refresh "),t.qZA()()(),t._UZ(26,"hr"),t.TgZ(27,"div",15),t._UZ(28,"hr",16),t.TgZ(29,"div",17)(30,"div",18)(31,"div",19)(32,"strong"),t._uU(33,"\xa0 "),t.TgZ(34,"input",20),t.NdJ("ngModelChange",function(r){return e.seVistearonTodos=r})("click",function(){return e.checkearTodos()}),t.qZA(),t._uU(35,"\xa0\xa0Nombre documento"),t.qZA()(),t.TgZ(36,"div",21)(37,"strong"),t._uU(38,"Estado"),t.qZA()(),t.TgZ(39,"div",22)(40,"strong"),t._uU(41,"Acciones"),t.qZA()()()(),t._UZ(42,"hr",16),t.qZA(),t._UZ(43,"hr"),t.TgZ(44,"div",18)(45,"div",23)(46,"div",24)(47,"div",25),t.YNc(48,Ft,24,4,"div",26),t.qZA()()()(),t.TgZ(49,"div",27)(50,"div",28)(51,"h5",29),t._uU(52,"\xa0"),t.qZA(),t._UZ(53,"button",30,31),t.qZA(),t.TgZ(55,"div",32)(56,"h5",29)(57,"strong"),t._uU(58,"Agregar documento"),t.qZA()(),t._UZ(59,"br"),t.TgZ(60,"div",33),t.YNc(61,Mt,8,6,"form",34),t.TgZ(62,"div",35),t.YNc(63,Ot,10,1,"div",36),t.YNc(64,jt,10,3,"div",37),t.qZA()()(),t.TgZ(65,"div",38)(66,"div",39),t._UZ(67,"div",40),t.YNc(68,Yt,6,0,"div",41),t._UZ(69,"div",42),t.TgZ(70,"div",40)(71,"button",43),t._uU(72," \xa0\xa0\xa0\xa0\xa0\xa0"),t.TgZ(73,"strong",44),t._uU(74,"Cerrar"),t.qZA(),t._uU(75,"\xa0\xa0\xa0\xa0\xa0\xa0 "),t.qZA()(),t._UZ(76,"div",40),t.qZA(),t._UZ(77,"br")(78,"br")(79,"br"),t.qZA()(),t.TgZ(80,"div",45)(81,"div",46)(82,"div",47)(83,"div",48),t._UZ(84,"h5",49)(85,"button",50),t.qZA(),t.TgZ(86,"div",51)(87,"h2"),t._uU(88,"Calificaci\xf3n de proveedores"),t.qZA(),t._UZ(89,"br")(90,"br"),t.TgZ(91,"div",52)(92,"label",53)(93,"h5"),t._uU(94,"Proveedor finalizado:\xa0"),t.qZA()(),t.TgZ(95,"div",54)(96,"div",55)(97,"input",56),t.NdJ("ngModelChange",function(r){return e.prioridad=r}),t.qZA(),t.YNc(98,Vt,2,0,"label",57),t.YNc(99,Qt,2,0,"label",58),t.qZA()()(),t._UZ(100,"br"),t.qZA(),t.TgZ(101,"div",59)(102,"button",60),t.NdJ("click",function(){return e.guardarCalificacion()}),t._uU(103," Guardar "),t.qZA()(),t.TgZ(104,"div",61),t._uU(105," \xa0 "),t.qZA()()()()),2&o&&(t.xp6(5),t.Q6J("ngModel",e.seleccion),t.xp6(29),t.Q6J("ngModel",e.seVistearonTodos),t.xp6(14),t.Q6J("ngForOf",e.listaDocumentos),t.xp6(13),t.Q6J("ngIf",!e.document.borrado),t.xp6(2),t.Q6J("ngIf",e.document.borrado),t.xp6(1),t.Q6J("ngIf",!e.document.borrado),t.xp6(4),t.Q6J("ngIf",!e.document.borrado),t.xp6(29),t.Q6J("ngModel",e.prioridad),t.xp6(1),t.Q6J("ngIf",e.prioridad),t.xp6(1),t.Q6J("ngIf",!e.prioridad))},dependencies:[v.sg,v.O5,Z._f,Z.NP,Z.dt,h._Y,h.YN,h.Kr,h.Wl,h.EJ,h.JJ,h.JL,h.sg,h.u,h.On],styles:["button.custom-redondo[_ngcontent-%COMP%]{border-radius:28px;display:inline-block}div.background-color[_ngcontent-%COMP%]{background-color:#f6f6f5}button.boton-custom[_ngcontent-%COMP%]{border-radius:28px}button.boton-custom.cargar[_ngcontent-%COMP%]{background-color:#0a9983;border:none;color:#fff}button.boton-custom.ver[_ngcontent-%COMP%]{background-color:#f0f2f0;border:none}button.boton-custom.borrar[_ngcontent-%COMP%]{background-color:transparent}hr.sin-borde[_ngcontent-%COMP%]{background-color:#f6f6f5}.menos-lenght-texto[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:478px}div.modal-content.custom[_ngcontent-%COMP%]{border-radius:30px}.hacer-hover[_ngcontent-%COMP%]{color:var(--bs-btn-hover-color);background-color:var(--bs-btn-hover-bg);border-color:var(--bs-btn-hover-border-color)}"]}),i})();var L=_(2609);class j{constructor(){this.index=0,this.id_veh=0,this.checks=[],this.id_doc=[]}}class Bt{constructor(){this.index=0,this.idVehiculo=0,this.documentos=[]}}let $t=(()=>{class i{constructor(o,e){this.http=o,this.router=e,this.baseUrl=A.N.urlGlobal+"documentos-calificacion-vehiculo/",this.url=`${this.baseUrl}`,this.httpOptions={headers:new g.WM({"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer "+localStorage.getItem("token")})}}listDocVehiculo(o){return this.http.get(this.url+o,this.httpOptions).pipe((0,b.X)(1))}}return i.\u0275fac=function(o){return new(o||i)(t.LFG(g.eN),t.LFG(T.F0))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var Ht=_(1481);let X=(()=>{class i{constructor(o){this.sanitizer=o}transform(o){return this.sanitizer.bypassSecurityTrustResourceUrl(o)}}return i.\u0275fac=function(o){return new(o||i)(t.Y36(Ht.H7,16))},i.\u0275pipe=t.Yjl({name:"safe",type:i,pure:!0}),i})();const Kt=["closeModal"],Rt=["closeCanvas"];function Xt(i,n){if(1&i){const o=t.EpF();t.TgZ(0,"div")(1,"div",57)(2,"div",58)(3,"input",59),t.NdJ("click",function(){const r=t.CHM(o).index,c=t.oxw().index,a=t.oxw();return t.KtG(a.vistear(c,r))}),t.qZA(),t._uU(4),t.qZA(),t.TgZ(5,"div",19)(6,"span",60),t._uU(7," \xa0"),t._UZ(8,"i",61),t._uU(9,"\xa0 "),t.qZA(),t._uU(10),t.qZA(),t.TgZ(11,"div",20)(12,"div",57)(13,"div",62)(14,"button",63),t.NdJ("click",function(){const r=t.CHM(o).$implicit,c=t.oxw(2);return t.KtG(c.subirDoc(r))}),t._uU(15," \xa0\xa0"),t._UZ(16,"i",64),t._uU(17," Cargar\xa0\xa0 "),t.qZA()(),t.TgZ(18,"div",62)(19,"button",65),t.NdJ("click",function(){const r=t.CHM(o).$implicit,c=t.oxw(2);return t.KtG(c.mostrarItem(r))}),t._uU(20," \xa0\xa0"),t._UZ(21,"i",66),t._uU(22," Ver\xa0\xa0 "),t.qZA()()()()(),t._UZ(23,"hr"),t.qZA()}if(2&i){const o=n.$implicit,e=n.index,s=t.oxw().index,r=t.oxw();t.xp6(2),t.s9C("title",o.lista_documentos[0].nombre_lis_doc),t.xp6(1),t.Q6J("checked",r.vehiculosChecks[s].checks[e]),t.xp6(1),t.hij(" \xa0\xa0\xa0",o.lista_documentos[0].nombre_lis_doc," "),t.xp6(6),t.hij("\xa0\xa0\xa0\xa0",o.estados.nombre_est," ")}}function Wt(i,n){if(1&i){const o=t.EpF();t.TgZ(0,"div",50)(1,"h2",51)(2,"button",52),t.NdJ("click",function(){t.CHM(o);const s=t.oxw();return t.KtG(s.cambioAcordeon(0))}),t._uU(3),t.qZA()(),t.TgZ(4,"div",53)(5,"div",54)(6,"div",55),t._UZ(7,"br"),t.YNc(8,Xt,24,4,"div",56),t._UZ(9,"br"),t.qZA()()()()}if(2&i){const o=n.$implicit,e=n.index,s=t.oxw();t.xp6(2),t.uIk("data-bs-target",s.setAtributeTarget[e])("aria-controls",s.setAtribute[e]),t.xp6(1),t.hij(" ",o.placa_veh," "),t.xp6(1),t.uIk("id",s.setAtribute[e]),t.xp6(4),t.Q6J("ngForOf",s.docsVehiculo[e].documentos)}}function to(i,n){1&i&&(t.TgZ(0,"p",71),t._uU(1," Seleccionar tipo de documento. "),t.qZA())}function oo(i,n){if(1&i&&(t.TgZ(0,"form",67)(1,"div",36)(2,"div",31)(3,"label",68),t._uU(4,"Tipo de documento"),t.qZA(),t._UZ(5,"input",69),t.YNc(6,to,2,0,"p",70),t.qZA()()()),2&i){const o=t.oxw();t.Q6J("formGroup",o.form),t.xp6(5),t.s9C("value",o.listaDocumentos[0].nombre_lis_doc),t.s9C("title",o.listaDocumentos[0].nombre_lis_doc),t.uIk("disabled",!0),t.xp6(1),t.Q6J("ngIf",o.submitted&&0==o.document.fk_lista_doc||o.submitted&&(null==o.f.fld.errors?null:o.f.fld.errors.required))}}function eo(i,n){if(1&i){const o=t.EpF();t.TgZ(0,"div",72)(1,"div",73)(2,"ul",74)(3,"li",75)(4,"h4"),t._uU(5),t.qZA()(),t.TgZ(6,"li",76)(7,"button",77),t.NdJ("click",function(){t.CHM(o);const s=t.oxw();return t.KtG(s.borrarDoc())}),t.TgZ(8,"h5"),t._uU(9,"Borrar documento"),t.qZA()()()()()()}if(2&i){const o=t.oxw();t.xp6(5),t.Oqu(o.listaDocumentos[0].nombre_lis_doc)}}function io(i,n){if(1&i){const o=t.EpF();t.TgZ(0,"ngx-dropzone-preview",81),t.NdJ("removed",function(){const r=t.CHM(o).$implicit,c=t.oxw(2);return t.KtG(c.onRemove(r))}),t.TgZ(1,"ngx-dropzone-label"),t._uU(2),t.qZA()()}if(2&i){const o=n.$implicit;t.Q6J("removable",!0),t.xp6(2),t.AsE("",o.name," (",o.type,")")}}function so(i,n){1&i&&(t.TgZ(0,"p",71),t._uU(1," Subir el archivo. "),t.qZA())}function ro(i,n){if(1&i){const o=t.EpF();t.TgZ(0,"div",78)(1,"h6"),t._uU(2,"Sube el archivo"),t.qZA(),t.TgZ(3,"p"),t._uU(4,"Puedes subir un archivo PDF,JPG, PNG de hasta 100 MB."),t.qZA(),t.TgZ(5,"ngx-dropzone",79),t.NdJ("change",function(s){t.CHM(o);const r=t.oxw();return t.KtG(r.onSelect(s))}),t.TgZ(6,"ngx-dropzone-label"),t._uU(7,"Arrastra y suelta un archivo para subirlo O elige archivos de tu dispositivo"),t.qZA(),t.YNc(8,io,3,3,"ngx-dropzone-preview",80),t.qZA(),t.YNc(9,so,2,0,"p",70),t.qZA()}if(2&i){const o=t.oxw();t.xp6(5),t.Q6J("multiple",!1),t.xp6(3),t.Q6J("ngForOf",o.files),t.xp6(1),t.Q6J("ngIf",o.submitted&&0==o.files.length)}}function no(i,n){if(1&i){const o=t.EpF();t.TgZ(0,"div",36)(1,"button",82),t.NdJ("click",function(){t.CHM(o);const s=t.oxw();return t.KtG(s.guardar())}),t._uU(2," \xa0\xa0\xa0\xa0\xa0\xa0"),t.TgZ(3,"strong",40),t._uU(4,"Guardar"),t.qZA(),t._uU(5,"\xa0\xa0\xa0\xa0\xa0\xa0 "),t.qZA()()}}let co=(()=>{class i{constructor(o,e,s,r,c,a,u,d,l){this.documentService=o,this.vehiculoCrud=e,this.sendEmailProveedor=s,this.listaDocVehiculoService=r,this.estadoDocumentService=c,this.processSweetAlert=a,this.formBuilder=u,this.cargarSelect=d,this.cargarSelectoresListaDocumentos=l,this.objectEdit=new C.I,this.document=new D.B,this.form=new h.nJ({}),this.formData=new FormData,this.visteadas=[],this.submitted=!1,this.seVistearonTodos=!1,this.pdfSrc="",this.vehiculos=[],this.vehiculosConDocs=[],this.listaDocumentos=[],this.todosLosDocs=[],this.vehiculosChecks=[],this.docsVehiculo=[],this.files=[],this.numeroItemAcordeon=0,this.seleccion=0,this.mostrarItemAcordeon=[],this.setAtributeTarget=[],this.setAtribute=[]}ngOnInit(){this.cargarVehiculos(),this.initFormProGen(),this.listaDocumentos=this.cargarListaDocs(),this.cargarDocsVehiculo(),this.listDocsVehiculos(!1,0)}initFormProGen(){this.form=this.formBuilder.group({fld:[this.document.fk_lista_doc,[h.kI.required]]})}get f(){return this.form.controls}cargarListaDocs(){return this.cargarSelectoresListaDocumentos.getCargoListaDocumento().filter(o=>"Veh\xedculo"===o.categoria_document.nombre_cat)}operacionSelector(){switch(Number(this.seleccion)){case 1:let o=[],e=[];this.vehiculosChecks.forEach((d,l)=>{o[l]=new j,o[l].id_veh=d.id_veh,d.checks.forEach((p,m)=>{p&&(o[l].id_doc.push(d.id_doc[m]),e.push(d.id_doc[m]),this.vistear(l,m))})});const s={list_documento:o};this.sendEmailProveedor.sendEmailVehiculo(Number(this.objectEdit.id),s).subscribe(()=>{this.refresh()});break;case 2:let r=[],c=!1;const a=this.cargarSelect.getCargoListaEstados().find(d=>"Pendiente"===d.nombre_est).nombre_est;this.vehiculosChecks.forEach((d,l)=>{r[l]=new j,r[l].id_veh=d.id_veh,d.checks.forEach((p,m)=>{p&&(a!==this.docsVehiculo[l].documentos[m].estados.nombre_est?(r[l].id_doc.push(d.id_doc[m]),this.vistear(l,m)):c=!0)})});const u={list_documento:r};this.estadoDocumentService.documentoProveedorVehiculo(Number(this.objectEdit.id),u).subscribe(()=>{this.refresh(),c&&setTimeout(()=>{},2e3)})}}cargarVehiculos(){this.vehiculos=this.objectEdit.vehiculos,this.vehiculos.forEach((o,e)=>{this.mostrarItemAcordeon.push(!1),this.setAtributeTarget.push("#flush-collapse"+e),this.setAtribute.push("flush-collapse"+e)})}cambioAcordeon(o){this.mostrarItemAcordeon.forEach(e=>!1),this.mostrarItemAcordeon[o]=!this.mostrarItemAcordeon[o]}cargarDocsVehiculo(){this.vehiculosConDocs=this.objectEdit.vehiculos;let o=[];this.vehiculosConDocs.forEach((e,s)=>{o[s]=new j,o[s].id_veh=Number(e.id),this.docsVehiculo[s]=new Bt}),this.vehiculosChecks=o}listDocsVehiculos(o,e){this.objectEdit.vehiculos.length>0&&(o||this.docsVehiculo.forEach(s=>{s.documentos=[]}),o&&e>this.docsVehiculo.length-1?this.docsVehiculo.forEach((s,r)=>{this.vehiculosChecks[r].checks=[],this.vehiculosChecks[r].id_doc=[],s.idVehiculo=this.objectEdit.vehiculos[r].id,s.documentos.forEach((c,a)=>{this.vehiculosChecks[r].checks[a]=!1,this.vehiculosChecks[r].id_doc[a]=new U,this.vehiculosChecks[r].id_doc[a].id=Number(c.lista_documentos[0].id),c.fk_lista_doc=Number(c.lista_documentos[0].id),this.docsVehiculo[r].documentos[a].fk_lista_doc=s.documentos[a].lista_documentos[0].id})}):this.listaDocVehiculoService.listDocVehiculo(Number(this.vehiculosConDocs[e].id)).subscribe(s=>{const r=s.data,c=r.vehiculo.documentoscali;c.length>0&&c.forEach((u,d)=>{this.docsVehiculo[e].documentos[d]=new k,this.docsVehiculo[e].documentos[d].id=Number(u.id),this.docsVehiculo[e].documentos[d].id_doc=Number(u.id_doc),this.docsVehiculo[e].documentos[d].fk_vehiculo=Number(u.fk_vehiculo),this.docsVehiculo[e].documentos[d].path_doc=u.path_doc,this.docsVehiculo[e].documentos[d].fk_lista_doc=Number(u.lista_documentos[0].id),this.docsVehiculo[e].documentos[d].lista_documentos.push(u.lista_documentos[0]),this.docsVehiculo[e].documentos[d].estados=new P.G,this.docsVehiculo[e].documentos[d].estados=u.estados});const a=r.doc_no_cargados;a.length>0&&a.forEach((u,d)=>{if(Array.isArray(u))u.forEach((l,p)=>{let m=new k;m.fk_vehiculo=this.vehiculosChecks[e].id_veh,m.estados=this.cargarSelect.getCargoListaEstados().find(f=>"Pendiente"===f.nombre_est),m.lista_documentos.push(l),this.docsVehiculo[e].documentos.push(m)});else{let l=new L.M;l=u,l.estados=this.cargarSelect.getCargoListaEstados().find(m=>"Pendiente"===m.nombre_est);let p=new k;p.fk_vehiculo=this.vehiculosChecks[e].id_veh,p.estados=l.estados,p.lista_documentos.push(l),this.docsVehiculo[e].documentos.push(p)}}),this.listDocsVehiculos(!0,e+=1)}))}subirDoc(o){this.files=[],this.listaDocumentos[0]=o.lista_documentos[0],this.document=new D.B,this.document.id=o.id_doc,this.document.fk_vehiculo=Number(o.fk_vehiculo),this.document.lista_documentos=o.lista_documentos,this.document.fk_lista_doc=Number(o?.id),this.document.estados=o.estados,this.document.borrado=Number(o.id)>0}mostrarItem(o){""===o.path_doc?(this.pdfSrc="",setTimeout(()=>{this.closeModal.nativeElement.click()},200),this.processSweetAlert.alertMensajeError("Error","El documento no se encuentra registrado.")):this.pdfSrc=o.path_doc}onRemove(o){this.files.splice(this.files.indexOf(o),1)}onSelect(o){this.files=[],this.files.push(...o.addedFiles),this.formData=new FormData;const e=new FileReader;e.readAsArrayBuffer(this.files[0]),e.onload=s=>{var r=new Blob([this.files[0]],{type:"application/pdf"});this.formData.set("file",r,this.files[0].name),this.document.formData=this.formData}}guardar(){this.objectEdit.id=Number(this.objectEdit.id),this.document.fk_lista_doc=Number(this.document.fk_lista_doc),this.document.fk_lista_doc=Number(this.document.lista_documentos[0].id),this.submitted=!0,!this.form.invalid&&0!==this.files.length&&0!==this.document.fk_lista_doc&&(this.formData.set("fk_vehiculo",""+this.document.fk_vehiculo),this.formData.set("fk_lista_doc",""+this.document.fk_lista_doc),this.formData.set("nombre_doc",""+this.document.nombre_doc),this.document.formData=this.formData,"Pendiente"===this.document.estados.nombre_est?this.documentService.crearDocumento(this.document,4).subscribe(o=>{const e=o.data;this.document.id=Number(e.id),this.document.path_doc=e.url,this.refresh(),this.closeCanvas.nativeElement.click()},o=>{this.closeCanvas.nativeElement.click()}):this.documentService.borrarDocumento(Number(this.document.id)).subscribe(()=>{this.documentService.crearDocumento(this.document,4).subscribe(o=>{this.refresh(),this.closeCanvas.nativeElement.click()})}))}refresh(){this.listDocsVehiculos(!1,0)}borrarDoc(){this.document.borrado=!this.document.borrado}checkearTodos(){this.vehiculosChecks.forEach(this.seVistearonTodos?(o,e)=>{o.index=e;for(let s=0;s<o.checks.length;s++)o.checks[s]=!1}:(o,e)=>{o.index=e;for(let s=0;s<o.checks.length;s++)o.checks[s]=!0})}vistear(o,e){this.vehiculosChecks[o].checks[e]=!this.vehiculosChecks[o].checks[e]}descargarItem(o){console.log("Item: "+JSON.stringify(o))}}return i.\u0275fac=function(o){return new(o||i)(t.Y36(O.Z),t.Y36(K),t.Y36(G),t.Y36($t),t.Y36(I),t.Y36(S.J),t.Y36(h.QS),t.Y36(y),t.Y36(N.t))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-vehiculos"]],viewQuery:function(o,e){if(1&o&&(t.Gf(Kt,5),t.Gf(Rt,5)),2&o){let s;t.iGM(s=t.CRH())&&(e.closeModal=s.first),t.iGM(s=t.CRH())&&(e.closeCanvas=s.first)}},inputs:{objectEdit:"objectEdit",document:"document"},decls:84,vars:10,consts:[[1,"d-flex","flex-row"],["align","left",1,"col-md-4"],["align","left",1,"col-md-2"],["aria-label","Default select example",1,"form-select",3,"ngModel","ngModelChange"],["selected","","value","0"],["value","1"],["value","2"],["align","left",1,"col-md-3"],["type","button",1,"btn","btn-primary","custom-redondo",3,"click"],[1,"bi","bi-send"],["align","right",1,"col-md-3"],["type","button",1,"btn","btn-transparent",3,"click"],[1,"bi","bi-arrow-clockwise"],[1,"background-color"],[1,"border-0","sin-borde"],[1,"pl-thead"],[1,"row"],[1,"col-6"],["type","checkbox","id","exampleCheck1",1,"form-check-input",3,"ngModel","ngModelChange","click"],[1,"col-2"],[1,"col-4"],["id","accordionFlushExample",1,"accordion","accordion-flush"],["class","accordion-item",4,"ngFor","ngForOf"],["data-bs-backdrop","static","tabindex","-1","id","staticBackdrop","aria-labelledby","staticBackdropLabel",1,"offcanvas","offcanvas-end"],[1,"offcanvas-header"],["id","staticBackdropLabel",1,"offcanvas-title"],["type","button","data-bs-dismiss","offcanvas","aria-label","Close",1,"btn-close"],["closeCanvas",""],[1,"offcanvas-body"],[1,"d-grid","gap-3"],[3,"formGroup",4,"ngIf"],[1,"form-group"],["class","container","align","center",4,"ngIf"],["class","container",4,"ngIf"],[1,"offcanvas-footer"],[1,"d-flex","flex-row","justify-content-center"],[1,"p-2"],["class","p-2",4,"ngIf"],[1,"p-1"],["type","button","data-bs-dismiss","offcanvas","aria-label","Close",1,"btn","btn-outline-primary","btn-lg","btn-block","radio-del-boton"],[1,"tamano-texto-boton"],["id","exampleModal","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-xl"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title","text-danger"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],["closeModal",""],[1,"modal-body"],["frameBorder","0","scrolling","auto","width","100%","height","580px","id","content_all","frameborder","0",3,"src"],[1,"accordion-item"],["id","i",1,"accordion-header"],["type","button","data-bs-toggle","collapse","aria-expanded","false",1,"accordion-button","collapsed","bg-light",3,"click"],["aria-labelledby","i","data-bs-parent","#accordionFlushExample",1,"accordion-collapse","collapse"],[1,"pl-table"],[1,"pl-tbody"],[4,"ngFor","ngForOf"],[1,"row","align-items-center"],[1,"col-6","text-truncate","menos-lenght-texto",3,"title"],["type","checkbox","id","exampleCheck1",1,"form-check-input",3,"checked","click"],[1,"bg-warning","rounded-circle"],[1,"bi","bi-caret-up-fill"],[1,"col-md-auto"],["data-bs-toggle","offcanvas","data-bs-target","#staticBackdrop",1,"boton-custom","cargar",3,"click"],[1,"bi","bi-file-arrow-up"],["data-bs-toggle","modal","data-bs-target","#exampleModal",1,"boton-custom","ver",3,"click"],[1,"bi","bi-eye"],[3,"formGroup"],["for","inputsm",1,"tamano-texto"],["type","text",1,"form-select",3,"value","title"],["class","text-danger",4,"ngIf"],[1,"text-danger"],["align","center",1,"container"],[1,"card",2,"width","18rem"],[1,"list-group","list-group-flush"],[1,"list-group-item"],[1,"list-group-item","text-center"],["type","button","id","toright",1,"btn","btn-theme","pull-right",3,"click"],[1,"container"],["accept","application/pdf,image/jpeg,image/jpg,image/png",3,"multiple","change"],[3,"removable","removed",4,"ngFor","ngForOf"],[3,"removable","removed"],["type","button",1,"btn","btn-primary","btn-lg","btn-block","radio-del-boton",3,"click"]],template:function(o,e){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h5"),t._uU(3,"Formularios de calificaci\xf3n"),t.qZA()(),t.TgZ(4,"div",2)(5,"select",3),t.NdJ("ngModelChange",function(r){return e.seleccion=r}),t.TgZ(6,"option",4)(7,"strong"),t._uU(8,"Seleccionar"),t.qZA()(),t.TgZ(9,"option",5),t._uU(10,"Enviar multiple"),t.qZA(),t.TgZ(11,"option",6),t._uU(12,"Aprobar"),t.qZA()()(),t.TgZ(13,"div",7),t._uU(14," \xa0\xa0\xa0\xa0 "),t.TgZ(15,"button",8),t.NdJ("click",function(){return e.operacionSelector()}),t._UZ(16,"i",9),t._uU(17," Ok "),t.qZA()(),t.TgZ(18,"div",10)(19,"button",11),t.NdJ("click",function(){return e.refresh()}),t._UZ(20,"i",12),t._uU(21," Refresh "),t.qZA()()(),t._UZ(22,"hr"),t.TgZ(23,"div",13),t._UZ(24,"hr",14),t.TgZ(25,"div",15)(26,"div",16)(27,"div",17)(28,"strong"),t._uU(29,"\xa0 "),t.TgZ(30,"input",18),t.NdJ("ngModelChange",function(r){return e.seVistearonTodos=r})("click",function(){return e.checkearTodos()}),t.qZA(),t._uU(31," \xa0\xa0Nombre documento"),t.qZA()(),t.TgZ(32,"div",19)(33,"strong"),t._uU(34,"Estado"),t.qZA()(),t.TgZ(35,"div",20)(36,"strong"),t._uU(37,"Acciones"),t.qZA()()()(),t._UZ(38,"hr",14),t.qZA(),t._UZ(39,"hr"),t.TgZ(40,"div",21),t.YNc(41,Wt,10,5,"div",22),t.qZA(),t.TgZ(42,"div",23)(43,"div",24)(44,"h5",25),t._uU(45,"\xa0"),t.qZA(),t._UZ(46,"button",26,27),t.qZA(),t.TgZ(48,"div",28)(49,"h5",25)(50,"strong"),t._uU(51,"Agregar documento"),t.qZA()(),t._UZ(52,"br"),t.TgZ(53,"div",29),t.YNc(54,oo,7,5,"form",30),t.TgZ(55,"div",31),t.YNc(56,eo,10,1,"div",32),t.YNc(57,ro,10,3,"div",33),t.qZA()()(),t.TgZ(58,"div",34)(59,"div",35),t._UZ(60,"div",36),t.YNc(61,no,6,0,"div",37),t._UZ(62,"div",38),t.TgZ(63,"div",36)(64,"button",39),t._uU(65," \xa0\xa0\xa0\xa0\xa0\xa0"),t.TgZ(66,"strong",40),t._uU(67,"Cerrar"),t.qZA(),t._uU(68,"\xa0\xa0\xa0\xa0\xa0\xa0 "),t.qZA()(),t._UZ(69,"div",36),t.qZA(),t._UZ(70,"br")(71,"br")(72,"br"),t.qZA()(),t.TgZ(73,"div",41)(74,"div",42)(75,"div",43)(76,"div",44)(77,"h5",45),t._uU(78,"Archivo"),t.qZA(),t._UZ(79,"button",46,47),t.qZA(),t.TgZ(81,"div",48),t._UZ(82,"iframe",49),t.ALo(83,"safe"),t.qZA()()()()),2&o&&(t.xp6(5),t.Q6J("ngModel",e.seleccion),t.xp6(25),t.Q6J("ngModel",e.seVistearonTodos),t.xp6(11),t.Q6J("ngForOf",e.vehiculosConDocs),t.xp6(13),t.Q6J("ngIf",!e.document.borrado),t.xp6(2),t.Q6J("ngIf",e.document.borrado),t.xp6(1),t.Q6J("ngIf",!e.document.borrado),t.xp6(4),t.Q6J("ngIf",!e.document.borrado),t.xp6(21),t.Q6J("src",t.lcZ(83,8,e.pdfSrc),t.uOi))},dependencies:[v.sg,v.O5,Z._f,Z.NP,Z.dt,h._Y,h.YN,h.Kr,h.Wl,h.EJ,h.JJ,h.JL,h.sg,h.On,X],styles:["button.custom-redondo[_ngcontent-%COMP%]{border-radius:28px;display:inline-block}div.background-color[_ngcontent-%COMP%]{background-color:#f6f6f5}button.boton-custom[_ngcontent-%COMP%]{border-radius:28px}button.boton-custom.cargar[_ngcontent-%COMP%]{background-color:#0a9983;border:none;color:#fff}button.boton-custom.ver[_ngcontent-%COMP%]{background-color:#f0f2f0;border:none}button.boton-custom.borrar[_ngcontent-%COMP%]{background-color:transparent}hr.sin-borde[_ngcontent-%COMP%]{background-color:#f6f6f5}.menos-lenght-texto[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:422px}"]}),i})();class q{constructor(){this.index=0,this.id_cond=0,this.checks=[],this.id_doc=[]}}class ao{constructor(){this.index=0,this.idConductor=0,this.documentos=[]}}let lo=(()=>{class i{constructor(){this.listaDocumento=[],this.seCargoListaDoc=!1}setCargoListaDocumento(o){this.listaDocumento=o}getCargoListaDocumento(){return this.listaDocumento}seCargoListaDocumento(){return this.seCargoListaDoc}cargoListaDocumento(o){this.seCargoListaDoc=o}}return i.\u0275fac=function(o){return new(o||i)},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),uo=(()=>{class i{constructor(o,e){this.http=o,this.router=e,this.baseUrl=A.N.urlGlobal+"documentos-calificacion-conductor/",this.url=`${this.baseUrl}`,this.httpOptions={headers:new g.WM({"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer "+localStorage.getItem("token")})}}listDocConductor(o){return this.http.get(this.url+o,this.httpOptions).pipe((0,b.X)(1))}}return i.\u0275fac=function(o){return new(o||i)(t.LFG(g.eN),t.LFG(T.F0))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const ho=["closeModal"],po=["closeCanvas"];function mo(i,n){if(1&i){const o=t.EpF();t.TgZ(0,"div")(1,"div",57)(2,"div",58)(3,"input",59),t.NdJ("click",function(){const r=t.CHM(o).index,c=t.oxw().index,a=t.oxw();return t.KtG(a.vistear(c,r))}),t.qZA(),t._uU(4),t.qZA(),t.TgZ(5,"div",19)(6,"span",60),t._uU(7," \xa0"),t._UZ(8,"i",61),t._uU(9,"\xa0 "),t.qZA(),t._uU(10),t.qZA(),t.TgZ(11,"div",20)(12,"div",57)(13,"div",62)(14,"button",63),t.NdJ("click",function(){const r=t.CHM(o).$implicit,c=t.oxw().index,a=t.oxw();return t.KtG(a.subirDoc(r,c))}),t._uU(15," \xa0\xa0"),t._UZ(16,"i",64),t._uU(17," Cargar\xa0\xa0 "),t.qZA()(),t.TgZ(18,"div",62)(19,"button",65),t.NdJ("click",function(){const r=t.CHM(o).$implicit,c=t.oxw(2);return t.KtG(c.mostrarItem(r))}),t._uU(20," \xa0\xa0"),t._UZ(21,"i",66),t._uU(22," Ver\xa0\xa0 "),t.qZA()()()()(),t._UZ(23,"hr"),t.qZA()}if(2&i){const o=n.$implicit,e=n.index,s=t.oxw().index,r=t.oxw();t.xp6(2),t.s9C("title",o.lista_documentos[0].nombre_lis_doc),t.xp6(1),t.Q6J("checked",r.conductoresChecks[s].checks[e]),t.xp6(1),t.hij(" \xa0\xa0\xa0",o.lista_documentos[0].nombre_lis_doc," "),t.xp6(6),t.hij("\xa0\xa0\xa0\xa0",o.estados.nombre_est," ")}}function _o(i,n){if(1&i){const o=t.EpF();t.TgZ(0,"div",50)(1,"h2",51)(2,"button",52),t.NdJ("click",function(){t.CHM(o);const s=t.oxw();return t.KtG(s.cambioAcordeon(0))}),t._uU(3),t.qZA()(),t.TgZ(4,"div",53)(5,"div",54)(6,"div",55),t._UZ(7,"br"),t.YNc(8,mo,24,4,"div",56),t._UZ(9,"br"),t.qZA()()()()}if(2&i){const o=n.$implicit,e=n.index,s=t.oxw();t.xp6(2),t.uIk("data-bs-target",s.setAtributeTarget[e])("aria-controls",s.setAtribute[e]),t.xp6(1),t.hij(" ",o.nombre_cond," "),t.xp6(1),t.uIk("id",s.setAtribute[e]),t.xp6(4),t.Q6J("ngForOf",s.docsConductor[e].documentos)}}function fo(i,n){1&i&&(t.TgZ(0,"p",71),t._uU(1," Seleccionar tipo de documento. "),t.qZA())}function go(i,n){if(1&i&&(t.TgZ(0,"form",67)(1,"div",36)(2,"div",31)(3,"label",68),t._uU(4,"Tipo de documento"),t.qZA(),t._UZ(5,"input",69),t.YNc(6,fo,2,0,"p",70),t.qZA()()()),2&i){const o=t.oxw();t.Q6J("formGroup",o.form),t.xp6(5),t.s9C("value",o.listaDocumentos[0].nombre_lis_doc),t.s9C("title",o.listaDocumentos[0].nombre_lis_doc),t.uIk("disabled",!0),t.xp6(1),t.Q6J("ngIf",o.submitted&&0==o.document.fk_lista_doc||o.submitted&&(null==o.f.fld.errors?null:o.f.fld.errors.required))}}function bo(i,n){if(1&i){const o=t.EpF();t.TgZ(0,"div",72)(1,"div",73)(2,"ul",74)(3,"li",75)(4,"h4"),t._uU(5),t.qZA()(),t.TgZ(6,"li",76)(7,"button",77),t.NdJ("click",function(){t.CHM(o);const s=t.oxw();return t.KtG(s.borrarDoc())}),t.TgZ(8,"h5"),t._uU(9,"Borrar documento"),t.qZA()()()()()()}if(2&i){const o=t.oxw();t.xp6(5),t.Oqu(o.listaDocumentos[0].nombre_lis_doc)}}function vo(i,n){if(1&i){const o=t.EpF();t.TgZ(0,"ngx-dropzone-preview",81),t.NdJ("removed",function(){const r=t.CHM(o).$implicit,c=t.oxw(2);return t.KtG(c.onRemove(r))}),t.TgZ(1,"ngx-dropzone-label"),t._uU(2),t.qZA()()}if(2&i){const o=n.$implicit;t.Q6J("removable",!0),t.xp6(2),t.AsE("",o.name," (",o.type,")")}}function Co(i,n){1&i&&(t.TgZ(0,"p",71),t._uU(1," Subir el archivo. "),t.qZA())}function Ao(i,n){if(1&i){const o=t.EpF();t.TgZ(0,"div",78)(1,"h6"),t._uU(2,"Sube el archivo"),t.qZA(),t.TgZ(3,"p"),t._uU(4,"Puedes subir un archivo PDF,JPG, PNG de hasta 100 MB."),t.qZA(),t.TgZ(5,"ngx-dropzone",79),t.NdJ("change",function(s){t.CHM(o);const r=t.oxw();return t.KtG(r.onSelect(s))}),t.TgZ(6,"ngx-dropzone-label"),t._uU(7,"Arrastra y suelta un archivo para subirlo O elige archivos de tu dispositivo "),t.qZA(),t.YNc(8,vo,3,3,"ngx-dropzone-preview",80),t.qZA(),t.YNc(9,Co,2,0,"p",70),t.qZA()}if(2&i){const o=t.oxw();t.xp6(5),t.Q6J("multiple",!1),t.xp6(3),t.Q6J("ngForOf",o.files),t.xp6(1),t.Q6J("ngIf",o.submitted&&0==o.files.length)}}function Zo(i,n){if(1&i){const o=t.EpF();t.TgZ(0,"div",36)(1,"button",82),t.NdJ("click",function(){t.CHM(o);const s=t.oxw();return t.KtG(s.guardar())}),t._uU(2," \xa0\xa0\xa0\xa0\xa0\xa0"),t.TgZ(3,"strong",40),t._uU(4,"Guardar"),t.qZA(),t._uU(5,"\xa0\xa0\xa0\xa0\xa0\xa0 "),t.qZA()()}}let To=(()=>{class i{constructor(o,e,s,r,c,a,u,d,l,p){this.cargarSelect=o,this.processSweetAlert=e,this.sendEmailProveedor=s,this.formBuilder=r,this.docCreacionProveedorService=c,this.estadoDocumentService=a,this.documentService=u,this.cargarSelectoresListaDocumentos=d,this.conductorCrud=l,this.listaDocConductorService=p,this.objectEdit=new C.I,this.document=new D.B,this.form=new h.nJ({}),this.formData=new FormData,this.conductores=[],this.conductoresConDocs=[],this.conductoresConDocsPocoTexto=[],this.conductoresChecks=[],this.docsConductor=[],this.listaDocumentos=[],this.todosLosDocs=[],this.files=[],this.submitted=!1,this.seVistearonTodos=!1,this.numeroItemAcordeon=0,this.seleccion=0,this.mostrarItemAcordeon=[],this.setAtributeTarget=[],this.setAtribute=[],this.pdfSrc=""}ngOnInit(){this.cargarConductores(),this.initFormProGen(),this.cargarDocsConductor(),this.cargarTodosLosDocsCategoria().then(()=>{this.listDocsConductores(!1,0)})}initFormProGen(){this.form=this.formBuilder.group({fld:[this.document.fk_lista_doc,[h.kI.required]]})}get f(){return this.form.controls}cargarConductores(){this.conductores=this.objectEdit.conductores,this.conductores.forEach((o,e)=>{this.mostrarItemAcordeon.push(!1),this.setAtributeTarget.push("#flush-collapse"+e),this.setAtribute.push("flush-collapse"+e)})}cargarTodosLosDocsCategoria(){return new Promise(o=>{this.listaDocumentos[0]=new L.M,this.listaDocumentos[0].nombre_lis_doc="",this.cargarSelectoresListaDocumentos.seCargoListaDocumento()?(this.todosLosDocs=this.cargarSelectoresListaDocumentos.getCargoListaDocumento(),o(!0)):this.docCreacionProveedorService.listDocsCategoria(5).subscribe(e=>{const s=e.data;this.todosLosDocs=s,this.cargarSelectoresListaDocumentos.setCargoListaDocumento(s),this.cargarSelectoresListaDocumentos.cargoListaDocumento(!0),o(!0)})})}operacionSelector(){switch(Number(this.seleccion)){case 1:let o=[];this.conductoresChecks.forEach((d,l)=>{o[l]=new q,o[l].id_cond=d.id_cond,d.checks.forEach((p,m)=>{if(p){let f=new U;f.id=d.id_doc[m].id,o[l].id_doc.push(f)}})});const e={list_documento:o};console.log("listaDocumento1: "+JSON.stringify(e)),this.sendEmailProveedor.sendEmailConductor(Number(this.objectEdit.id),e).subscribe(()=>{this.refresh()});break;case 2:const s=this.cargarSelect.getCargoListaEstados().find(d=>"Pendiente"===d.nombre_est).nombre_est;let r=!1,c=[];this.conductoresChecks.forEach((d,l)=>{c[l]=new q,c[l].id_cond=d.id_cond,d.checks.forEach((p,m)=>{if(p)if(s!==this.docsConductor[l].documentos[m].estados.nombre_est){let f=new U;f.id=d.id_doc[m].id,c[l].id_doc.push(f),this.vistear(l,m)}else r=!0})});const a={list_documento:c};this.cargarSelect.getCargoListaEstados().find(d=>"Finalizado"===d.nombre_est),this.estadoDocumentService.documentoProveedorConductor(Number(this.objectEdit.id),a).subscribe(()=>{this.refresh(),r&&setTimeout(()=>{},2e3)})}}cambioAcordeon(o){this.mostrarItemAcordeon.forEach(e=>!1),this.mostrarItemAcordeon[o]=!this.mostrarItemAcordeon[o]}cargarDocsConductor(){this.conductoresConDocs=this.objectEdit.conductores,this.conductoresConDocs.forEach((o,e)=>{this.conductoresChecks[e]=new q,this.conductoresChecks[e].id_cond=Number(o.id),this.docsConductor[e]=new ao,this.docsConductor[e].idConductor=Number(o.id),this.conductoresChecks[e].checks=[],this.conductoresChecks[e].id_doc=[]})}listDocsConductores(o,e){if(this.objectEdit.conductores.length>0)if(o||this.docsConductor.forEach(s=>{s.documentos=[]}),o&&e>this.docsConductor.length-1)this.cargarSelect.getCargoListaEstados().find(r=>"Pendiente"===r.nombre_est),this.docsConductor.forEach((r,c)=>{this.conductoresChecks[c]=new q,this.conductoresChecks[c].id_cond=Number(r.idConductor),this.conductoresChecks[c].checks=[],this.conductoresChecks[c].id_doc=[],r.documentos.forEach((a,u)=>{this.conductoresChecks[c].checks[u]=!1,this.conductoresChecks[c].id_doc[u]=new U,this.conductoresChecks[c].id_doc[u].id=Number(a.lista_documentos[0].id),this.docsConductor[c].documentos[u].fk_lista_doc=Number(this.docsConductor[c].documentos[u].lista_documentos[0].id)})});else{const s=this.cargarSelect.getCargoListaEstados().find(r=>"Pendiente"===r.nombre_est);this.listaDocConductorService.listDocConductor(Number(this.docsConductor[e].idConductor)).subscribe(r=>{const c=r.data,a=c.conductor.documentoscali;a.length>0&&a.forEach((d,l)=>{this.docsConductor[e].documentos[l]=new k,this.docsConductor[e].documentos[l].id=Number(d.id),this.docsConductor[e].documentos[l].id_doc=Number(d.id_doc),this.docsConductor[e].documentos[l].fk_conductor=Number(d.fk_conductor),this.docsConductor[e].documentos[l].path_doc=d.path_doc,this.docsConductor[e].documentos[l].lista_documentos.push(d.lista_documentos[0]),this.docsConductor[e].documentos[l].estados=new P.G,this.docsConductor[e].documentos[l].estados=d.estados});const u=c.doc_no_cargados;if(u.length>0)u.forEach((d,l)=>{if(Array.isArray(d))d.forEach((p,m)=>{let f=new k;f.fk_conductor=this.conductoresChecks[e].id_cond,f.estados=s,f.lista_documentos.push(p),this.docsConductor[e].documentos.push(f)});else{let p=new L.M;p=d,p.estados=s;let m=new k;m.fk_conductor=this.conductoresChecks[e].id_cond,m.estados=p.estados,m.lista_documentos.push(p),this.docsConductor[e].documentos.push(m)}});else for(let d=0;d<7;d++)if(void 0!==JSON.stringify(c.doc_no_cargados[""+d])){let l=new k,p=new L.M;p=c.doc_no_cargados[""+d],p.estados=s,l.fk_conductor=this.conductoresChecks[e].id_cond,l.estados=s,l.lista_documentos.push(p),this.docsConductor[e].documentos.push(l)}this.listDocsConductores(!0,e+=1)})}}subirDoc(o,e){this.files=[],this.listaDocumentos[0]=o.lista_documentos[0],this.document=new D.B,this.document.id=Number(o.id_doc),this.document.lista_documentos=o.lista_documentos,this.document.fk_conductor=Number(this.conductoresChecks[e].id_cond),this.document.fk_lista_doc=Number(this.listaDocumentos[0].id),this.document.estados=o.estados,this.document.borrado=Number(o.id)>0}mostrarItem(o){""===o.path_doc?(this.pdfSrc="",setTimeout(()=>{this.closeModal.nativeElement.click()},200),this.processSweetAlert.alertMensajeError("Error","El documento no se encuentra registrado.")):this.pdfSrc=o.path_doc}onRemove(o){this.files.splice(this.files.indexOf(o),1)}refresh(){this.listDocsConductores(!1,0)}onSelect(o){this.files=[],this.files.push(...o.addedFiles),this.formData=new FormData;const e=new FileReader;e.readAsArrayBuffer(this.files[0]),e.onload=s=>{var r=new Blob([this.files[0]],{type:"application/pdf"});this.formData.set("file",r,this.files[0].name),this.document.formData=this.formData}}guardar(){this.submitted=!0,!this.form.invalid&&0!==this.files.length&&(this.formData.set("fk_conductor",""+this.document.fk_conductor),this.formData.set("fk_lista_doc",""+this.document.fk_lista_doc),this.formData.set("nombre_doc",""+this.document.nombre_doc),this.document.formData=this.formData,"Pendiente"===this.document.estados.nombre_est?this.documentService.crearDocumento(this.document,3).subscribe(o=>{this.refresh(),this.closeCanvas.nativeElement.click()},o=>{this.closeCanvas.nativeElement.click(),console.log("error: "+JSON.stringify(o))}):this.documentService.borrarDocumento(Number(this.document.id)).subscribe(()=>{this.documentService.crearDocumento(this.document,3).subscribe(o=>{this.refresh(),this.closeCanvas.nativeElement.click()})}))}borrarDoc(){this.document.borrado=!this.document.borrado}checkearTodos(){this.conductoresChecks.forEach(this.seVistearonTodos?(o,e)=>{o.index=e;for(let s=0;s<o.checks.length;s++)o.checks[s]=!1}:(o,e)=>{o.index=e;for(let s=0;s<o.checks.length;s++)o.checks[s]=!0})}vistear(o,e){this.conductoresChecks[o].checks[e]=!this.conductoresChecks[o].checks[e]}descargarItem(o){console.log("Item: "+JSON.stringify(o))}}return i.\u0275fac=function(o){return new(o||i)(t.Y36(y),t.Y36(S.J),t.Y36(G),t.Y36(h.QS),t.Y36(H.F),t.Y36(I),t.Y36(O.Z),t.Y36(lo),t.Y36(R),t.Y36(uo))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-conductores"]],viewQuery:function(o,e){if(1&o&&(t.Gf(ho,5),t.Gf(po,5)),2&o){let s;t.iGM(s=t.CRH())&&(e.closeModal=s.first),t.iGM(s=t.CRH())&&(e.closeCanvas=s.first)}},inputs:{objectEdit:"objectEdit",document:"document"},decls:84,vars:10,consts:[[1,"d-flex","flex-row"],["align","left",1,"col-md-4"],["align","left",1,"col-md-2"],["aria-label","Default select example",1,"form-select",3,"ngModel","ngModelChange"],["selected","","value","0"],["value","1"],["value","2"],["align","left",1,"col-md-3"],["type","button",1,"btn","btn-primary","custom-redondo",3,"click"],[1,"bi","bi-send"],["align","right",1,"col-md-3"],["type","button",1,"btn","btn-transparent",3,"click"],[1,"bi","bi-arrow-clockwise"],[1,"background-color"],[1,"border-0","sin-borde"],[1,"pl-thead"],[1,"row"],[1,"col-6"],["type","checkbox","id","exampleCheck1",1,"form-check-input",3,"ngModel","ngModelChange","click"],[1,"col-2"],[1,"col-4"],["id","accordionFlushExample",1,"accordion","accordion-flush"],["class","accordion-item",4,"ngFor","ngForOf"],["data-bs-backdrop","static","tabindex","-1","id","staticBackdrop","aria-labelledby","staticBackdropLabel",1,"offcanvas","offcanvas-end"],[1,"offcanvas-header"],["id","staticBackdropLabel",1,"offcanvas-title"],["type","button","data-bs-dismiss","offcanvas","aria-label","Close",1,"btn-close"],["closeCanvas",""],[1,"offcanvas-body"],[1,"d-grid","gap-3"],[3,"formGroup",4,"ngIf"],[1,"form-group"],["class","container","align","center",4,"ngIf"],["class","container",4,"ngIf"],[1,"offcanvas-footer"],[1,"d-flex","flex-row","justify-content-center"],[1,"p-2"],["class","p-2",4,"ngIf"],[1,"p-1"],["type","button","data-bs-dismiss","offcanvas","aria-label","Close",1,"btn","btn-outline-primary","btn-lg","btn-block","radio-del-boton"],[1,"tamano-texto-boton"],["id","exampleModal","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-xl"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title","text-danger"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],["closeModal",""],[1,"modal-body"],["frameBorder","0","scrolling","auto","width","100%","height","580px","id","content_all","frameborder","0",3,"src"],[1,"accordion-item"],["id","i",1,"accordion-header"],["type","button","data-bs-toggle","collapse","aria-expanded","false",1,"accordion-button","collapsed","bg-light",3,"click"],["aria-labelledby","i","data-bs-parent","#accordionFlushExample",1,"accordion-collapse","collapse"],[1,"pl-table"],[1,"pl-tbody"],[4,"ngFor","ngForOf"],[1,"row","align-items-center"],[1,"col-6","text-truncate",3,"title"],["type","checkbox","id","exampleCheck1",1,"form-check-input",3,"checked","click"],[1,"bg-warning","rounded-circle"],[1,"bi","bi-caret-up-fill"],[1,"col-md-auto"],["data-bs-toggle","offcanvas","data-bs-target","#staticBackdrop",1,"boton-custom","cargar",3,"click"],[1,"bi","bi-file-arrow-up"],["data-bs-toggle","modal","data-bs-target","#exampleModal",1,"boton-custom","ver",3,"click"],[1,"bi","bi-eye"],[3,"formGroup"],["for","inputsm",1,"tamano-texto"],["type","text",1,"form-select",3,"value","title"],["class","text-danger",4,"ngIf"],[1,"text-danger"],["align","center",1,"container"],[1,"card",2,"width","18rem"],[1,"list-group","list-group-flush"],[1,"list-group-item"],[1,"list-group-item","text-center"],["type","button","id","toright",1,"btn","btn-theme","pull-right",3,"click"],[1,"container"],["accept","application/pdf,image/jpeg,image/jpg,image/png",3,"multiple","change"],[3,"removable","removed",4,"ngFor","ngForOf"],[3,"removable","removed"],["type","button",1,"btn","btn-primary","btn-lg","btn-block","radio-del-boton",3,"click"]],template:function(o,e){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h5"),t._uU(3,"Formularios de calificaci\xf3n"),t.qZA()(),t.TgZ(4,"div",2)(5,"select",3),t.NdJ("ngModelChange",function(r){return e.seleccion=r}),t.TgZ(6,"option",4)(7,"strong"),t._uU(8,"Seleccionar"),t.qZA()(),t.TgZ(9,"option",5),t._uU(10,"Enviar multiple"),t.qZA(),t.TgZ(11,"option",6),t._uU(12,"Aprobar"),t.qZA()()(),t.TgZ(13,"div",7),t._uU(14," \xa0\xa0\xa0\xa0 "),t.TgZ(15,"button",8),t.NdJ("click",function(){return e.operacionSelector()}),t._UZ(16,"i",9),t._uU(17," Ok "),t.qZA()(),t.TgZ(18,"div",10)(19,"button",11),t.NdJ("click",function(){return e.refresh()}),t._UZ(20,"i",12),t._uU(21," Refresh "),t.qZA()()(),t._UZ(22,"hr"),t.TgZ(23,"div",13),t._UZ(24,"hr",14),t.TgZ(25,"div",15)(26,"div",16)(27,"div",17)(28,"strong"),t._uU(29,"\xa0 "),t.TgZ(30,"input",18),t.NdJ("ngModelChange",function(r){return e.seVistearonTodos=r})("click",function(){return e.checkearTodos()}),t.qZA(),t._uU(31," \xa0\xa0Nombre documento"),t.qZA()(),t.TgZ(32,"div",19)(33,"strong"),t._uU(34,"Estado"),t.qZA()(),t.TgZ(35,"div",20)(36,"strong"),t._uU(37,"Acciones"),t.qZA()()()(),t._UZ(38,"hr",14),t.qZA(),t._UZ(39,"hr"),t.TgZ(40,"div",21),t.YNc(41,_o,10,5,"div",22),t.qZA(),t.TgZ(42,"div",23)(43,"div",24)(44,"h5",25),t._uU(45,"\xa0"),t.qZA(),t._UZ(46,"button",26,27),t.qZA(),t.TgZ(48,"div",28)(49,"h5",25)(50,"strong"),t._uU(51,"Agregar documento"),t.qZA()(),t._UZ(52,"br"),t.TgZ(53,"div",29),t.YNc(54,go,7,5,"form",30),t.TgZ(55,"div",31),t.YNc(56,bo,10,1,"div",32),t.YNc(57,Ao,10,3,"div",33),t.qZA()()(),t.TgZ(58,"div",34)(59,"div",35),t._UZ(60,"div",36),t.YNc(61,Zo,6,0,"div",37),t._UZ(62,"div",38),t.TgZ(63,"div",36)(64,"button",39),t._uU(65," \xa0\xa0\xa0\xa0\xa0\xa0"),t.TgZ(66,"strong",40),t._uU(67,"Cerrar"),t.qZA(),t._uU(68,"\xa0\xa0\xa0\xa0\xa0\xa0 "),t.qZA()(),t._UZ(69,"div",36),t.qZA(),t._UZ(70,"br")(71,"br")(72,"br"),t.qZA()(),t.TgZ(73,"div",41)(74,"div",42)(75,"div",43)(76,"div",44)(77,"h5",45),t._uU(78,"Archivo"),t.qZA(),t._UZ(79,"button",46,47),t.qZA(),t.TgZ(81,"div",48),t._UZ(82,"iframe",49),t.ALo(83,"safe"),t.qZA()()()()),2&o&&(t.xp6(5),t.Q6J("ngModel",e.seleccion),t.xp6(25),t.Q6J("ngModel",e.seVistearonTodos),t.xp6(11),t.Q6J("ngForOf",e.conductoresConDocs),t.xp6(13),t.Q6J("ngIf",!e.document.borrado),t.xp6(2),t.Q6J("ngIf",e.document.borrado),t.xp6(1),t.Q6J("ngIf",!e.document.borrado),t.xp6(4),t.Q6J("ngIf",!e.document.borrado),t.xp6(21),t.Q6J("src",t.lcZ(83,8,e.pdfSrc),t.uOi))},dependencies:[v.sg,v.O5,Z._f,Z.NP,Z.dt,h._Y,h.YN,h.Kr,h.Wl,h.EJ,h.JJ,h.JL,h.sg,h.On,X],styles:["button.custom-redondo[_ngcontent-%COMP%]{border-radius:28px;display:inline-block}div.background-color[_ngcontent-%COMP%]{background-color:#f6f6f5}button.boton-custom[_ngcontent-%COMP%]{border-radius:28px}button.boton-custom.cargar[_ngcontent-%COMP%]{background-color:#0a9983;border:none;color:#fff}button.boton-custom.ver[_ngcontent-%COMP%]{background-color:#f0f2f0;border:none}button.boton-custom.borrar[_ngcontent-%COMP%]{background-color:transparent}hr.sin-borde[_ngcontent-%COMP%]{background-color:#f6f6f5}"]}),i})();const w=function(i,n){return{"col-md-4 menos-lenght":i,"col-md-6 menos-lenght":n}};function ko(i,n){if(1&i&&(t.TgZ(0,"div",14),t._uU(1),t.qZA()),2&i){const o=t.oxw();t.s9C("title",o.objectEdit.clasificacion_pro.nombre_cla),t.Q6J("ngClass",t.WLB(3,w,o.esLargo,!o.esLargo)),t.xp6(1),t.hij(" ",o.objectEdit.clasificacion_pro.nombre_cla," ")}}function xo(i,n){if(1&i&&(t.TgZ(0,"div",22),t._uU(1),t.qZA()),2&i){const o=t.oxw();t.Q6J("ngClass",t.WLB(2,w,o.esLargo,!o.esLargo)),t.xp6(1),t.Oqu(o.objectEdit.categorias.nombre_cat)}}function wo(i,n){if(1&i&&(t.TgZ(0,"tr")(1,"td",26),t._uU(2),t.qZA(),t.TgZ(3,"td",26),t._uU(4),t.qZA()()),2&i){const o=n.$implicit;t.xp6(1),t.s9C("title",o.nombre_cof),t.xp6(1),t.Oqu(o.nombre_cof),t.xp6(1),t.s9C("title",o.email_cont),t.xp6(1),t.Oqu(o.email_cont)}}function Do(i,n){if(1&i&&(t.TgZ(0,"table",23)(1,"thead")(2,"tr")(3,"th",24),t._uU(4,"Contactos "),t.qZA(),t.TgZ(5,"th",24),t._uU(6,"financieros"),t.qZA(),t._UZ(7,"th",24),t.qZA()(),t.TgZ(8,"tbody")(9,"tr")(10,"td"),t._uU(11,"Nombre"),t.qZA(),t.TgZ(12,"td"),t._uU(13,"Correo"),t.qZA()(),t.YNc(14,wo,5,4,"tr",25),t.qZA()()),2&i){const o=t.oxw();t.xp6(14),t.Q6J("ngForOf",o.contactoFinancieroProveedor)}}function Uo(i,n){if(1&i&&(t.TgZ(0,"tr")(1,"td",26),t._uU(2),t.qZA(),t.TgZ(3,"td",26),t._uU(4),t.qZA()()),2&i){const o=n.$implicit;t.xp6(1),t.s9C("title",o.nombre_cont),t.xp6(1),t.Oqu(o.nombre_cont),t.xp6(1),t.s9C("title",o.nombre_cont),t.xp6(1),t.Oqu(o.email_cont)}}function Eo(i,n){if(1&i&&(t.TgZ(0,"table",23)(1,"thead")(2,"tr")(3,"th",24),t._uU(4,"Contactos"),t.qZA(),t._UZ(5,"th",24)(6,"th",24),t.qZA()(),t.TgZ(7,"tbody")(8,"tr")(9,"td"),t._uU(10,"Nombre"),t.qZA(),t.TgZ(11,"td"),t._uU(12,"Correo"),t.qZA()(),t.YNc(13,Uo,5,4,"tr",25),t.qZA()()),2&i){const o=t.oxw();t.xp6(13),t.Q6J("ngForOf",o.contactoProveedor)}}const Y=function(i,n){return{active:i,disabled:n}};function Po(i,n){if(1&i){const o=t.EpF();t.TgZ(0,"div")(1,"ul",27)(2,"li",28),t.NdJ("click",function(){t.CHM(o);const s=t.oxw();return t.KtG(s.cambioTab(1))}),t.TgZ(3,"a",29),t._uU(4," General "),t.qZA()(),t.TgZ(5,"li",28),t.NdJ("click",function(){t.CHM(o);const s=t.oxw();return t.KtG(s.cambioTab(2))}),t.TgZ(6,"a",30),t._uU(7," Veh\xedculos "),t.qZA()(),t.TgZ(8,"li",28),t.NdJ("click",function(){t.CHM(o);const s=t.oxw();return t.KtG(s.cambioTab(3))}),t.TgZ(9,"a",30),t._uU(10," Conductores "),t.qZA()()(),t._UZ(11,"br"),t.qZA()}if(2&i){const o=t.oxw();t.xp6(3),t.Q6J("ngClass",t.WLB(3,Y,1==o.tipoDocumentoTab,1!=o.tipoDocumentoTab)),t.xp6(3),t.Q6J("ngClass",t.WLB(6,Y,2==o.tipoDocumentoTab,2!=o.tipoDocumentoTab)),t.xp6(3),t.Q6J("ngClass",t.WLB(9,Y,3==o.tipoDocumentoTab,3!=o.tipoDocumentoTab))}}function So(i,n){if(1&i&&t._UZ(0,"app-general",31),2&i){const o=t.oxw();t.Q6J("objectEdit",o.proveedor)("califEdit",o.califEdit)}}function yo(i,n){if(1&i&&t._UZ(0,"app-vehiculos",32),2&i){const o=t.oxw();t.Q6J("objectEdit",o.proveedor)}}function Lo(i,n){if(1&i&&t._UZ(0,"app-conductores",32),2&i){const o=t.oxw();t.Q6J("objectEdit",o.proveedor)}}let qo=(()=>{class i{constructor(o){this.calificacionProveedorService=o,this.objectNuevo=new t.vpe,this.objectEdit=new C.I,this.califEdit=new F,this.esLargoArray=[],this.esLargo=!1,this.listaDocumentos=[],this.tipoDocumentoTab=0,this.proveedor=new C.I,this.contactoProveedor=[],this.contactoFinancieroProveedor=[],this.submitted=!1}ngOnInit(){this.cargarContactoFinancieroListaDocumento(),console.log("ID=",this.objectEdit.id)}cambioTab(o){this.tipoDocumentoTab=o}eliminar(){window.location.reload()}cargarContactoFinancieroListaDocumento(){this.calificacionProveedorService.retrieve(this.objectEdit.id).subscribe(o=>{let e=new C.I;e=o.data[0],console.log("SALIDA nuev",this.proveedor=e),console.log(this.objectEdit.id),this.esLargo=!0,this.esLargoArray[0]=this.objectEdit.ruc_pro.length>22,this.esLargoArray[1]=this.objectEdit.nombre_pro.length>22,this.esLargoArray[2]=this.objectEdit.tipo_proveedor.nombre_tip.length>22,this.esLargoArray[3]=1==this.objectEdit.fk_tipo_proveedor||2==this.objectEdit.fk_tipo_proveedor?this.objectEdit.clasificacion_pro.nombre_cla.length>22:this.objectEdit.categorias.nombre_cat.length>22,this.esLargoArray[4]=this.objectEdit.fecha_creacion_pro.length>22,this.esLargoArray[5]=this.objectEdit.usuario_pro.length>22;const r=this.esLargoArray.find(c=>!0===c);console.log(JSON.stringify(r)),void 0===r&&(this.esLargo=!1),this.contactoProveedor=e.contactos,this.contactoFinancieroProveedor=e.contactos_fina,console.log("SALIDA PERROS",this.proveedor=e),this.tipoDocumentoTab=1},o=>{console.log(JSON.stringify(o))})}}return i.\u0275fac=function(o){return new(o||i)(t.Y36(J))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-forms"]],inputs:{objectEdit:"objectEdit",califEdit:"califEdit"},outputs:{objectNuevo:"objectNuevo"},decls:64,vars:38,consts:[["id","main",1,"container-fluid"],[1,"row"],["align","left",1,"col-md-12"],["role","group","aria-label","First group",1,"btn-group","mb-3"],["type","button",1,"btn","btn-secondary-outline","customize",2,"text-align","center",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","26","height","26","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-arrow-left"],["fill-rule","evenodd","d","M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8z"],["type","button",1,"btn",2,"text-align","center"],[1,"h6","font-weight-bold","mb-0"],[1,"row","row-offcanvas","row-offcanvas-left"],["id","sidebar","role","navigation",1,"col-md-3","col-lg-3","sidebar-offcanvas","pl-0"],[1,"nav","flex-column","sticky-top","pl-0","pt-4"],[1,"d-flex","flex-row"],[1,"col-md-6"],[3,"ngClass","title"],[3,"ngClass","title",4,"ngIf"],[3,"ngClass",4,"ngIf"],["class","table",4,"ngIf"],[1,"col","main","pt-4"],[4,"ngIf"],[3,"objectEdit","califEdit",4,"ngIf"],[3,"objectEdit",4,"ngIf"],[3,"ngClass"],[1,"table"],["scope","col"],[4,"ngFor","ngForOf"],[1,"menos-lenght",3,"title"],[1,"nav","nav-tabs","nav-fill"],[1,"nav-item",3,"click"],["aria-current","page",1,"nav-link",3,"ngClass"],["aria-current","page",1,"nav-link","disabled",3,"ngClass"],[3,"objectEdit","califEdit"],[3,"objectEdit"]],template:function(o,e){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"button",4),t.NdJ("click",function(){return e.eliminar()}),t.O4$(),t.TgZ(5,"svg",5),t._UZ(6,"path",6),t.qZA()(),t.kcU(),t.TgZ(7,"button",7),t._uU(8," Proveedores "),t.qZA()(),t._UZ(9,"br"),t.TgZ(10,"label",8)(11,"h3"),t._uU(12,"Formulario de calificaci\xf3n"),t.qZA()()()(),t.TgZ(13,"div",9)(14,"div",10)(15,"ul",11)(16,"div",12)(17,"div",13)(18,"strong"),t._uU(19,"RUC"),t.qZA()(),t.TgZ(20,"div",14),t._uU(21),t.qZA(),t._UZ(22,"br")(23,"br"),t.qZA(),t.TgZ(24,"div",12)(25,"div",13)(26,"strong"),t._uU(27,"Proveedor"),t.qZA()(),t.TgZ(28,"div",14),t._uU(29),t.qZA(),t._UZ(30,"br")(31,"br"),t.qZA(),t.TgZ(32,"div",12)(33,"div",13)(34,"strong"),t._uU(35,"Tipo de proveedor"),t.qZA()(),t.TgZ(36,"div",14),t._uU(37),t.qZA()(),t.TgZ(38,"div",12)(39,"div",13)(40,"strong"),t._uU(41,"Tipo de servicio"),t.qZA()(),t.YNc(42,ko,2,6,"div",15),t.YNc(43,xo,2,5,"div",16),t.qZA(),t.TgZ(44,"div",12)(45,"div",13)(46,"strong"),t._uU(47,"Fecha de creaci\xf3n"),t.qZA()(),t.TgZ(48,"div",14),t._uU(49),t.qZA()(),t.TgZ(50,"div",12)(51,"div",13)(52,"strong"),t._uU(53,"Solicitado por"),t.qZA()(),t.TgZ(54,"div",14),t._uU(55),t.qZA()(),t.YNc(56,Do,15,1,"table",17),t.YNc(57,Eo,14,1,"table",17),t.qZA()(),t.TgZ(58,"div",18),t.YNc(59,Po,12,12,"div",19),t.YNc(60,So,1,2,"app-general",20),t.YNc(61,yo,1,1,"app-vehiculos",21),t.YNc(62,Lo,1,1,"app-conductores",21),t._UZ(63,"br"),t.qZA()()()),2&o&&(t.xp6(20),t.s9C("title",e.objectEdit.ruc_pro),t.Q6J("ngClass",t.WLB(23,w,e.esLargo,!e.esLargo)),t.xp6(1),t.hij(" ",e.objectEdit.ruc_pro," "),t.xp6(7),t.s9C("title",e.objectEdit.nombre_pro),t.Q6J("ngClass",t.WLB(26,w,e.esLargo,!e.esLargo)),t.xp6(1),t.hij(" ",e.objectEdit.nombre_pro," "),t.xp6(7),t.s9C("title",e.objectEdit.tipo_proveedor.nombre_tip),t.Q6J("ngClass",t.WLB(29,w,e.esLargo,!e.esLargo)),t.xp6(1),t.hij(" ",e.objectEdit.tipo_proveedor.nombre_tip," "),t.xp6(5),t.Q6J("ngIf",1==e.objectEdit.fk_tipo_proveedor||2==e.objectEdit.fk_tipo_proveedor),t.xp6(1),t.Q6J("ngIf",3==e.objectEdit.fk_tipo_proveedor),t.xp6(5),t.s9C("title",e.objectEdit.fecha_creacion_pro),t.Q6J("ngClass",t.WLB(32,w,e.esLargo,!e.esLargo)),t.xp6(1),t.hij(" ",e.objectEdit.fecha_creacion_pro," "),t.xp6(5),t.s9C("title",e.objectEdit.usuario_pro),t.Q6J("ngClass",t.WLB(35,w,e.esLargo,!e.esLargo)),t.xp6(1),t.hij(" ",e.objectEdit.usuario_pro," "),t.xp6(1),t.Q6J("ngIf",e.contactoFinancieroProveedor.length>0),t.xp6(1),t.Q6J("ngIf",e.contactoProveedor.length>0),t.xp6(2),t.Q6J("ngIf",2==e.proveedor.fk_tipo_proveedor),t.xp6(1),t.Q6J("ngIf",1==e.tipoDocumentoTab),t.xp6(1),t.Q6J("ngIf",2==e.tipoDocumentoTab),t.xp6(1),t.Q6J("ngIf",3==e.tipoDocumentoTab))},dependencies:[v.mk,v.sg,v.O5,zt,co,To],styles:["button.custom-redondo[_ngcontent-%COMP%]{border-radius:28px;display:inline-block}div.background-color[_ngcontent-%COMP%]{background-color:#f6f6f5}button.boton-custom[_ngcontent-%COMP%]{border-radius:28px}button.boton-custom.cargar[_ngcontent-%COMP%]{background-color:#0a9983;border:none;color:#fff}button.boton-custom.ver[_ngcontent-%COMP%]{background-color:#f0f2f0;border:none}button.boton-custom.borrar[_ngcontent-%COMP%]{background-color:transparent}hr.sin-borde[_ngcontent-%COMP%]{background-color:#f6f6f5}.menos-lenght[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:110px}"]}),i})();function Fo(i,n){if(1&i){const o=t.EpF();t.TgZ(0,"app-forms",2),t.NdJ("objectNuevo",function(s){t.CHM(o);const r=t.oxw();return t.KtG(r.mostrarComponente(s))}),t.qZA()}if(2&i){const o=t.oxw();t.Q6J("objectEdit",o.objeto)("califEdit",o.califi)}}function No(i,n){if(1&i){const o=t.EpF();t.TgZ(0,"app-list",3),t.NdJ("object",function(s){t.CHM(o);const r=t.oxw();return t.KtG(r.mostrarComponente(s))})("califi",function(s){t.CHM(o);const r=t.oxw();return t.KtG(r.pasarDatoCalifica(s))}),t.qZA()}}const Jo=[{path:"",component:(()=>{class i{constructor(o,e,s,r){this.categoriaDocumentsCrud=o,this.cargarSelectListDocumento=e,this.categoriaDocumentsService=s,this.listaDocumentosService=r,this.mostrarForm=!1,this.objeto=new C.I,this.califi=new F,this.categoriasDocuments=[]}ngOnInit(){this.cargarListaCategoriaDocumentos(),this.cargarListaDocumentos()}cargarListaDocumentos(){this.cargarSelectListDocumento.seCargoListaDocumento()?this.cargarSelectListDocumento.getCargoListaDocumento():this.listaDocumentosService.listDocumento().subscribe(o=>{this.cargarSelectListDocumento.setCargoListaDocumento(o.data),this.cargarSelectListDocumento.cargoListaDocumento(!0)})}mostrarComponente(o){switch(o.nombre_pro){case"":this.objeto=new C.I,this.mostrarForm=!0;break;case"Borrado":this.objeto=new C.I,this.mostrarForm=!1;break;default:this.objeto=o,this.mostrarForm=!0}}pasarDatoCalifica(o){this.califi=o}cargarListaCategoriaDocumentos(){this.categoriaDocumentsService.list().subscribe(o=>{this.categoriasDocuments=o.data,this.categoriaDocumentsCrud.setCargoListaCategoriasDocuments(this.categoriasDocuments),this.categoriaDocumentsCrud.cargoListaCategoriasDocuments(!0)},()=>{this.categoriaDocumentsCrud.cargoListaCategoriasDocuments(!0),this.categoriaDocumentsCrud.setCargoListaCategoriasDocuments([])})}}return i.\u0275fac=function(o){return new(o||i)(t.Y36(W),t.Y36(N.t),t.Y36(tt),t.Y36(Q))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-admi-cali"]],decls:4,vars:2,consts:[[3,"objectEdit","califEdit","objectNuevo",4,"ngIf"],[3,"object","califi",4,"ngIf"],[3,"objectEdit","califEdit","objectNuevo"],[3,"object","califi"]],template:function(o,e){1&o&&(t.YNc(0,Fo,1,2,"app-forms",0),t.YNc(1,No,1,0,"app-list",1),t._UZ(2,"br")(3,"br")),2&o&&(t.Q6J("ngIf",e.mostrarForm),t.xp6(1),t.Q6J("ngIf",!e.mostrarForm))},dependencies:[v.O5,kt,qo]}),i})()}];let Mo=(()=>{class i{}return i.\u0275fac=function(o){return new(o||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[T.Bz.forChild(Jo),T.Bz]}),i})();class Oo{}let Io=(()=>{class i{}return i.\u0275fac=function(o){return new(o||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[v.ez,Z.bB,h.UX,v.ez,h.u5,M.JX,Mo]}),i})()}}]);